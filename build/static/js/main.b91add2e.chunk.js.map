{"version":3,"sources":["Components/start.js","Components/Stat Info/strinfo.js","Components/Stat Info/dexinfo.js","Components/Stat Info/intinfo.js","Components/Stat Info/vitinfo.js","Components/statistics.js","Components/content.js","Components/equipment.js","Components/hitPointsUpdate.js","Components/hitPoints.js","Components/armour.js","Components/inventory.js","Components/inventoryButton.js","Components/combatContent.js","Components/text.js","Components/itemList.js","Components/chambers.js","Components/Dice/d20.js","Components/spellList.js","Components/Dice/d10.js","Components/actions.js","Components/Dice/d4.js","Components/Dice/d6.js","Components/Dice/d8.js","Components/Dice/d12.js","Components/itemInfo.js","Components/items.js","Components/spellInfo.js","Components/spells.js","Components/combatActions.js","Components/combat.js","Components/combatEnemies.js","Components/gameover.js","Components/game.js","Components/main.js","index.js"],"names":["Start","id","React","Component","StrInfo","props","useEffect","document","getElementById","focus","className","tabIndex","onBlur","dismiss","DexInfo","IntInfo","VitInfo","oldStats","Statistics","update","event","action","target","dataset","stat","Number","allocate","points","statsHandler","allocateHandler","stats","strength","dexterity","intelligence","vitality","applyPoints","value","mainHandler","key","keyCode","keyApply","keyInfo","setState","showStrInfo","showDexInfo","showIntInfo","showVitInfo","handleTooltipDismiss","state","this","data-stat","data-action","onClick","onKeyDown","aria-label","Content","itemRewards","text","x","receivedItems","length","push","name","latestSpell","window","$motive","actionCases","case5","every","Boolean","inventoryContents","find","item","previousSpell","equippedItems","torso","case12","contentSelect","Equipment","itemUnequipHandler","head","legs","boots","gloves","weapon","HitPointsUpdate","componentDidMount","timeout","setTimeout","healingUpdate","clearTimeout","healing","HitPoints","playerHitPointsColour","hitPoints","maxHitPoints","Armour","armourDisplay","undefined","armour","Inventory","closeInventory","$inventoryValueSnapshot","$inventoryActionSnapshot","InventoryButton","inventory","CombatContent","enemyHealthDescription","enemy","turnDescription","combatTurn","actionDescription","enemyAction","actionPrint","map","element","description","enemyDamage","index","playerDamage","playerDamageBreakdown","damage","substring","indexOf","bonus","magicBonus","totalBonus","equipment","equipmentBonus","hasOwnProperty","reduce","a","b","combatPreviousSpell","playerHealing","Text","render","inventoryHandler","prevProps","actionNum","ItemList","magic","equipable","equipSlot","treasure","level","useable","Chambers","chamber","chambers","chamberHandler","console","log","RollD20","min","max","Math","ceil","floor","random","SpellList","canBeUsedInCombat","cooldown","duration","RollD10","v","c","Actions","keyCheck","actionClick","$spellPickerValueSnapshot","$spellPickerActionSnapshot","itemEquipHandler","Items","spellbookUpdate","lock","$combatValueSnapshot","roll","case8","spellbook","spellPickerHandler","hitPointsUpdate","spellCooldownUpdate","gameover","inventoryRemove","itemPickerHandler","requireInput","answer","toLowerCase","includes","hitPointsMaxHandler","enemyNumberUpdate","actions","inputRequired","data-value","actionSelect","RollD4","RollD6","RollD8","RollD12","ItemInfo","inventoryNames","buttonPos","weapons","useableItems","itemBonus","showItemInfo","itemEquip","slice","itemName","parentElement","firstChild","innerText","getElementsByClassName","type","onFocus","heal","multiplier","result","n","combatItemHandler","combatLock","itemUse","itemClick","keepWeapon","cancelItems","weaponSwapHandler","getBoundingClientRect","weaponSwap","combatItem","timeOutId","handleTooltipFocus","inventoryPrint","style","left","width","top","height","items","filter","itemSelect","SpellInfo","spellNames","combatSpells","spell","showSpellInfo","statBonus","intBonus","spellCooldown","location","previousSpellUpdate","spellCooldownSet","rejuvenate","spellDamage","enemyHitPointsUpdate","damageDisplay","damageBreakdown","turnOrder","spellAttack","previousSpellHandler","combatSpellHandler","healingDisplay","armourBonusUpdate","spellDurationSet","spellCast","Spells","spellSelect","spells","spellClick","cancelSpell","keyCheckCancel","spellbookContents","spellPrint","spellbookEquipped","CombatActions","actionRender","combatSpell","attack","cast","some","weaponSwapLock","changeWeapon","itemUseLock","useItem","turnContinue","gameOver","combatEnd","bonusDamage","attackDamage","weaponDamageBonus","spellDurationClear","statPointReward","useActions","damageArray","healingArray","enemyHealing","forEach","ability","enemyAbilities","abilities","enemyActionSelect","i","damageBonus","finalDamage","healBonus","finalHealing","enemyActionUpdate","Combat","spellDurationUpdate","spellDuration","shield","combatPreviousSpellHandler","CombatEnemies","Gameover","refreshPage","reload","Game","statisticHandler","hitPointsHandler","HP","finalHitPoints","newHitPoints","hitPointsAdd","hitPointsMaxUpdate","healingHandler","armourHandler","totalArmour","wornItems","armourBonus","armourBonusHandler","str","dex","int","vit","maxHP","currentHP","actionLock","JSON","parse","stringify","stateName","inventorySort","nameA","toUpperCase","nameB","inventoryUpdate","oldInventory","eachItem","checkItems","newInventory","concat","flatInventory","flat","sort","removeItem","findIndex","splice","spellUpdate","oldSpells","addedSpells","checkSpells","s","spellList","newSpells","flatSpellbook","equipUpdate","equipState","unequipUpdate","slot","inventoryState","enemyNumber","enemyHitPointHandler","enemyHitPointsOld","prevState","combatWeaponSwapHandler","bool","shuffle","array","randomIndex","currentIndex","spellPicker","shuffledSpells","itemPicker","mod","amount","equipped","finalTreasure","add","shuffledTreasure","treasureShuffle","shift","finalName","bind","allSpellsUnlocked","Main","actionHandler","gameStart","chamberSelect","gameActive","e","shuffledChambers","chamberUpdate","newChambers","num","spellCooldownHandler","activeSpell","spellDurationHandler","ReactDOM"],"mappings":"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","file":"static/js/main.b91add2e.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nclass Start extends React.Component {\r\n\trender() {\r\n\t\treturn <div id=\"start\">Begin Adventure</div>\r\n\t}\r\n}\r\n\r\nexport default Start;","import React from 'react';\r\n\r\nfunction StrInfo(props) {\r\n\tconst dismiss = () => props.dismiss(\"str\");\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tdocument.getElementById(\"strInfo\").focus();\r\n\t});\r\n\treturn <div id=\"strInfo\" className=\"statInfo\" tabIndex=\"0\" onBlur={() => {dismiss()}}>Strength represents your physical and athletic abilities and is used when calculating damage using melee weapons such as swords.<br /><br />Every 4 points of Strength increases your damage with these weapons by 1.</div>\r\n}\r\n\r\nexport default StrInfo;","import React from 'react';\r\n\r\nfunction DexInfo(props) {\r\n\tconst dismiss = () => props.dismiss(\"dex\");\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tdocument.getElementById(\"dexInfo\").focus();\r\n\t});\r\n\treturn <div id=\"dexInfo\" className=\"statInfo\" tabIndex=\"0\" onBlur={() => {dismiss()}}>Dexterity represents your nimbleness and skill and is used when calculating damage using ranged weapons such as bows.<br /><br />Every 4 points of Dexterity increases your damage with these weapons by 1.</div>\r\n}\r\n\r\nexport default DexInfo;","import React from 'react';\r\n\r\nfunction IntInfo(props) {\r\n\tconst dismiss = () => props.dismiss(\"int\");\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tdocument.getElementById(\"intInfo\").focus();\r\n\t});\r\n\treturn <div id=\"intInfo\" className=\"statInfo\" tabIndex=\"0\" onBlur={() => {dismiss()}}>Intelligence represents your ability to acquire and apply knowledge and is used for spellcasting.<br /><br />Every 4 points of Intelligence increases the damage you deal using spells by 1.</div>\r\n}\r\n\r\nexport default IntInfo;","import React from 'react';\r\n\r\nfunction VitInfo(props) {\r\n\tconst dismiss = () => props.dismiss(\"vit\");\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tdocument.getElementById(\"vitInfo\").focus();\r\n\t});\r\n\treturn <div id=\"vitInfo\" className=\"statInfo\" tabIndex=\"0\" onBlur={() => {dismiss()}}>Vitality represents your physical and mental resilience and affects your total hit points.<br /><br />Each point of Vitality gives you 1 additional hit point.</div>\r\n}\r\n\r\nexport default VitInfo;","import React from 'react';\r\nimport StrInfo from './Stat Info/strinfo.js';\r\nimport DexInfo from './Stat Info/dexinfo.js';\r\nimport IntInfo from './Stat Info/intinfo.js'\r\nimport VitInfo from './Stat Info/vitinfo.js';\r\n\r\nlet oldStats;\r\nclass Statistics extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tshowStrInfo: false,\r\n\t\t\tshowDexInfo: false,\r\n\t\t\tshowIntInfo: false,\r\n\t\t\tshowVitInfo: false,\r\n\t\t};\r\n\t\toldStats = this.props.stats.stat;\r\n\t}\r\n\t\r\n\tupdate = (event) => { //Updates assigned points.\r\n\t\tlet action = event.target.dataset.action;\r\n\t\tlet stat = Number(event.target.dataset.stat)\r\n\t\tif (action === \"+\") {\r\n\t\t\tswitch(stat) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tif (this.props.allocate.points === 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.statsHandler(1, 0, 0, 0);\r\n\t\t\t\t\t\tthis.props.allocateHandler(true, this.props.allocate.points-1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (this.props.allocate.points === 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.statsHandler(0, 1, 0, 0);\r\n\t\t\t\t\t\tthis.props.allocateHandler(true, this.props.allocate.points-1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (this.props.allocate.points === 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.statsHandler(0, 0, 1, 0);\r\n\t\t\t\t\t\tthis.props.allocateHandler(true, this.props.allocate.points-1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tif (this.props.allocate.points === 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.statsHandler(0, 0, 0, 1);\r\n\t\t\t\t\t\tthis.props.allocateHandler(true, this.props.allocate.points-1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (action === \"-\") {\r\n\t\t\tswitch(stat) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tif (this.props.stats.stat.strength === oldStats.strength) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.statsHandler(-1, 0, 0, 0);\r\n\t\t\t\t\t\tthis.props.allocateHandler(true, this.props.allocate.points+1);\r\n\t\t\t\t\t\tbreak;\t\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (this.props.stats.stat.dexterity === oldStats.dexterity) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.statsHandler(0, -1, 0, 0);\r\n\t\t\t\t\t\tthis.props.allocateHandler(true, this.props.allocate.points+1);\r\n\t\t\t\t\t\tbreak;\t\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (this.props.stats.stat.intelligence === oldStats.intelligence) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.statsHandler(0, 0, -1, 0);\r\n\t\t\t\t\t\tthis.props.allocateHandler(true, this.props.allocate.points+1);\r\n\t\t\t\t\t\tbreak;\t\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tif (this.props.stats.stat.vitality === oldStats.vitality) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.statsHandler(0, 0, 0, -1);\r\n\t\t\t\t\t\tthis.props.allocateHandler(true, this.props.allocate.points+1);\r\n\t\t\t\t\t\tbreak;\t\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tapplyPoints = () => { //Finalizes points and disables further allocation.\r\n\t\tthis.props.allocateHandler(false, 0);\r\n\t\tif (this.props.value === 2) {\r\n\t\t\tthis.props.mainHandler(3, 3);\r\n\t\t};\r\n\t};\r\n\t\r\n\tkey = (event) => {if (event.keyCode === 32) {\r\n\t\tthis.update(event);\r\n\t}};\r\n\t\r\n\tkeyApply = (event) => {if (event.keyCode === 32) {\r\n\t\tthis.applyPoints(event);\r\n\t}};\r\n\t\r\n\tkeyInfo = (event, stat) => {if (event.keyCode === 32) {\r\n\t\tswitch(stat) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"str\":\r\n\t\t\t\tthis.setState({showStrInfo: true});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"dex\":\r\n\t\t\t\tthis.setState({showDexInfo: true});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"int\":\r\n\t\t\t\tthis.setState({showIntInfo: true});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"vit\":\r\n\t\t\t\tthis.setState({showVitInfo: true});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}};\r\n\t\r\n\thandleTooltipDismiss = (stat) => {\r\n\t\tswitch(stat) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"str\":\r\n\t\t\t\tthis.setState({showStrInfo: false});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"dex\":\r\n\t\t\t\tthis.setState({showDexInfo: false});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"int\":\r\n\t\t\t\tthis.setState({showIntInfo: false});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"vit\":\r\n\t\t\t\tthis.setState({showVitInfo: false});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn <div id=\"statisticsDiv\">\r\n\t\t\t<div className=\"statsContainer\">\r\n\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t<div className=\"statMinus\" data-stat={0} data-action={\"-\"} onClick={this.update} onKeyDown={this.key} aria-label=\"Decrease Strength\" tabIndex=\"0\">-</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"statistics\" id=\"statStr\" data-stat=\"str\" onClick={() => this.setState({showStrInfo: true})} onKeyDown={(event) => this.keyInfo(event, \"str\")} tabIndex=\"0\">Strength: {this.props.stats.stat.strength}</div>\r\n\t\t\t\t{this.state.showStrInfo ? <StrInfo dismiss={this.handleTooltipDismiss}/> : null}\r\n\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t<div className=\"statPlus\" data-stat={0} data-action={\"+\"} onClick={this.update} onKeyDown={this.key} aria-label=\"Increase Strength\" tabIndex=\"0\">+</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"statsContainer\">\r\n\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t<div className=\"statMinus\" data-stat={1} data-action={\"-\"} onClick={this.update} onKeyDown={this.key} aria-label=\"Decrease Dexterity\" tabIndex=\"0\">-</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"statistics\" id=\"statDex\" data-stat=\"dex\" onClick={() => this.setState({showDexInfo: true})} onKeyDown={(event) => this.keyInfo(event, \"dex\")} tabIndex=\"0\">Dexterity: {this.props.stats.stat.dexterity}</div>\r\n\t\t\t\t{this.state.showDexInfo ? <DexInfo dismiss={this.handleTooltipDismiss}/> : null}\r\n\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t<div className=\"statPlus\" data-stat={1} data-action={\"+\"} onClick={this.update} onKeyDown={this.key} aria-label=\"Increase Dexterity\" tabIndex=\"0\">+</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"statsContainer\">\r\n\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t<div className=\"statMinus\" data-stat={2} data-action={\"-\"} onClick={this.update} onKeyDown={this.key} aria-label=\"Decrease Intelligence\" tabIndex=\"0\">-</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"statistics\" id=\"statInt\" data-stat=\"int\" onClick={() => this.setState({showIntInfo: true})} onKeyDown={(event) => this.keyInfo(event, \"int\")} tabIndex=\"0\">Intelligence: {this.props.stats.stat.intelligence}</div>\r\n\t\t\t\t{this.state.showIntInfo ? <IntInfo dismiss={this.handleTooltipDismiss}/> : null}\r\n\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t<div className=\"statPlus\" data-stat={2} data-action={\"+\"} onClick={this.update} onKeyDown={this.key} aria-label=\"Increase Intelligence\" tabIndex=\"0\">+</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"statsContainer\">\r\n\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t<div className=\"statMinus\" data-stat={3} data-action={\"-\"} onClick={this.update} onKeyDown={this.key} aria-label=\"Decrease Vitality\" tabIndex=\"0\">-</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"statistics\" id=\"statVit\" data-stat=\"vit\" onClick={() => this.setState({showVitInfo: true})} onKeyDown={(event) => this.keyInfo(event, \"vit\")} tabIndex=\"0\">Vitality: {this.props.stats.stat.vitality}</div>\r\n\t\t\t\t{this.state.showVitInfo ? <VitInfo dismiss={this.handleTooltipDismiss}/> : null}\r\n\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t<div className=\"statPlus\" data-stat={3} data-action={\"+\"} onClick={this.update} onKeyDown={this.key} aria-label=\"Increase Vitality\" tabIndex=\"0\">+</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t{\r\n\t\t\t\t\t(() => {\r\n\t\t\t\t\t\tif (this.props.allocate.allocate === true && this.props.allocate.points > 0) {\r\n\t\t\t\t\t\t\tif (this.props.allocate.points === 1) {\r\n\t\t\t\t\t\t\t\treturn <div id=\"pointsRemainingDiv\">{this.props.allocate.points} point remaining</div>\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn <div id=\"pointsRemainingDiv\">{this.props.allocate.points} points remaining</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (this.props.allocate.allocate === true && this.props.allocate.points === 0) {\r\n\t\t\t\t\t\t\treturn <div id=\"applyPointsDiv\" onClick={this.applyPoints} onKeyDown={this.keyApply} tabIndex=\"0\">Apply Points</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})()\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t}\r\n}\r\n\r\nexport default Statistics;","import React from 'react';\r\nimport Statistics from './statistics.js'\r\n\r\nclass Content extends React.Component {\r\n\tcontentSelect() {\r\n\t\tswitch(this.props.value) {\r\n\t\t\tdefault:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>This is currently as far as the project goes. All systems have been implemented, I just haven't written all of the actual content yet.</p>\r\n\t\t\t\t\t<p>This project was just intended for me to practice and become more familiar with React, a goal which has definitely been fulfilled, but I may return and finish the actual game at some point.</p>\r\n\t\t\t\t\t<p>Thank you for playing!</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase \"emptySpell\":\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>Your spell will not do anything useful here.</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase \"spellScrollNoSpellbook\":\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>Unfortunately you have no spellbook to copy this scroll into.</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase \"spellScroll\":\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>You carefully copy the spell into your spellbook.</p>\r\n\t\t\t\t\t<p>You add the {this.props.latestSpell.name} spell to your spellbook.</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase \"allSpells\":\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>It seems that you already know every spell that you can. You are truly a master of the arcane!</p>\r\n\t\t\t\t\t<p>Since I have no more spells for you, have a slight increase to your Intelligence instead.</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase 0:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>You are standing before an imposing wooden door. The trees around you are silent as you take in the dark wood and iron bands of the door that leads into the depths of the mountain.</p>\r\n\t\t\t\t\t<p>You know that beyond it lies the infamous dungeon of Malthazor, the Mad Mage.</p>\r\n\t\t\t\t\t<p>You find yourself on a dangerous quest, but what has brought you here?</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase 1:\r\n\t\t\t\tswitch(window.$motive) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"This is an error.\"\r\n\t\t\t\t\tcase \"wealth\":\r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>The lure of fabulous riches has drawn many adventurers to seek their fortune upon dangerous quests.</p>\r\n\t\t\t\t\t\t\t<p>But it would be folly to enter Malthazor's dungeon without proper preparation.</p>\r\n\t\t\t\t\t\t\t<p>What skills do you have?</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\tcase \"revenge\":\r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>The righting of a terrible wrong. Surely there can be no nobler reason for setting out upon a dangerous quest. </p>\r\n\t\t\t\t\t\t\t<p>But it would be folly to enter Malthazor's dungeon without proper preparation.</p>\r\n\t\t\t\t\t\t\t<p>What skills do you have?</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\tcase \"curiosity\":\r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>The gathering of knowledge and secrets is always an irresistible call for certain individuals to embark upon a dangerous quest.</p>\r\n\t\t\t\t\t\t\t<p>But it would be folly to enter Malthazor's dungeon without proper preparation.</p>\r\n\t\t\t\t\t\t\t<p>What skills do you have?</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\tcase 2:\r\n\t\t\t\tif (this.props.allocate.allocate === true) {\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>Choose your starting statistics.</p>\r\n\t\t\t\t\t\t<p>Select one of the statistics to see information about it.</p>\r\n\t\t\t\t\t\t<Statistics {...this.props} \r\n\t\t\t\t\t\t\t\t\tstatsHandler={this.props.statsHandler}\r\n\t\t\t\t\t\t\t\t\tmainHandler={this.props.mainHandler}\r\n\t\t\t\t\t\t\t\t\tallocateHandler={this.props.allocateHandler} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn <div className=\"content\"><Statistics {...this.props}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatsHandler={this.props.statsHandler}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmainHandler={this.props.mainHandler}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tallocateHandler={this.props.allocateHandler} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\tcase 3:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>What weapon did you bring to Malthazor's Dungeon?</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase 4:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>Your resolve steeled, you prepare to continue your quest.</p>\r\n\t\t\t\t\t<p>Who knows what kind of twisted labyrinth you are about to face?</p>\r\n\t\t\t\t\t<p>You push open the heavy doors and enter the dungeon of Malthazor, the Mad Mage.</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase 5:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t{this.props.actionCases.case5.every(Boolean) !== false && <p>The heavy door closes behind you with a resounding thud.</p>}\r\n\t\t\t\t\t<p>You are standing in a small stone antechamber. Flaming torches sit in sconces on the wall, casting a flickering glow across the small room.</p>\r\n\t\t\t\t\t<p>You are alone. Opposite you is a dark passage, the light from the torches falling short of the archway.</p>\r\n\t\t\t\t\t<p>All things considered, this is not as harrowing a start to Malthazor's dungeon as one might expect.</p>\r\n\t\t\t\t\t<p>What will you do?</p>\r\n\t\t\t\t</div>\r\n\t\t\t\tcase 5.1:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You attempt to open the door you passed through. Locked! Magically sealed! Or possibly just not openable from the inside. It would appear that retreat is not an option.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 5.2:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You carefully wrench a torch free from the wall.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 5.3:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You examine the torches around the wall. As you suspected, the torches are in fact magical in nature. The flame atop them will never burn down. Handy.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\tcase 6:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>You enter the darkened passageway across the room.</p>\r\n\t\t\t\t\t{this.props.inventoryContents.find(item => item.id === 4) ? <p>You shine your torch to illuminate the way ahead of you.</p> : null}\r\n\t\t\t\t\t<p>As you advance cautiously you spot movement in the darkness.</p>\r\n\t\t\t\t\t<p>A (surprisingly ambulatory) skeleton leaps from beyond your field of vision and attacks you!</p>\r\n\t\t\t\t</div>\r\n\t\t\t\tcase \"6loot\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t\t\t<div className=\"allocateNotification\">\r\n\t\t\t\t\t\t\t\t<p>You have gained 2 points to improve your skills!</p>\r\n\t\t\t\t\t\t\t\t<p className=\"allocateNotificationSubtitle\">(You can allocate them in your Inventory.)</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<p>On the skeleton's head you see an old, but presumably still functional, leather helmet.</p>\r\n\t\t\t\t\t\t<p>It would be a shame to let it go to waste.</p>\r\n\t\t\t\t\t\t{this.props.inventoryContents.find(item => item.id === 4) ? <p>In the light of your torch, you also notice the glint of a small bottle tucked into an alcove in the wall. A healing potion!</p> : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 6.1:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t{this.props.inventoryContents.find(item => item.id === 4) ? <p>You have gained a Leather Helmet and a Healing Potion!</p> : <p>You have gained a Leather Helmet!</p>}\r\n\t\t\t\t\t\t<p>The Leather Helmet provides 1 point of armour while worn.</p>\r\n\t\t\t\t\t\t<p>Each point of armour reduces damage that you take by 1.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\tcase 7:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>The first guardian of Malthazor's dungeon defeated, you face the passage beyond.</p>\r\n\t\t\t\t\t<p>Wait, was that a guardian? <span className=\"textSmall\">It might have just been an angry local skeleton...</span></p>\r\n\t\t\t\t\t<p>Regardless, it's been beaten, and your journey into the dungeon begins in earnest.</p>\r\n\t\t\t\t\t<p className=\"contentExtra\">(From this point onward, the chambers you find yourself in will be randomly generated. The challenges that you face may be too powerful for you on your first attempt. Persevere and make it through enough of them while building your strength along the way and you might come face to face with Malthazor himself. Good luck.)</p>\r\n\t\t\t\t</div>\r\n\t\t\tcase 8: \r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>You are in some sort of library. The walls are covered almost entirely by bookshelves filled with ancient looking books.</p>\r\n\t\t\t\t\t{window.$motive === \"curiosity\" ? <p>Some of these books would doubtless be of value to you.</p> : null}\r\n\t\t\t\t\t<p>There are no visible doors leading onward.</p>\r\n\t\t\t\t\t<p>What will you do?</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t\tcase 8.01:\r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>You search the bookcases around the room for an exit.</p>\r\n\t\t\t\t\t\t\t<p>After a few minutes of searching, you find that one of the bookcases seems to be moveable.</p>\r\n\t\t\t\t\t\t\t<p>Success! With some effort you are able to pull the bookcase from its position and a doorway is revealed.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\tcase 8.02:\r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>You search the bookcases around the room for an exit.</p>\r\n\t\t\t\t\t\t\t<p>After a few minutes of searching, you find that one of the bookcases seems to be moveable.</p>\r\n\t\t\t\t\t\t\t<p>Calamity! With some effort you are able to pull the bookcase from its position and a doorway is revealed, but in the process some part of the mechanism injures you. </p>\r\n\t\t\t\t\t\t\t<p>You take 4 points of damage!</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\tcase 8.1:\r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>You carefully examine the bookshelves that line the walls of this room, looking for a way out.</p>\r\n\t\t\t\t\t\t\t<p>Wait a moment, what was that? \"An Exploration of Concealed Egress\". What a preposterously suspicious name for a book.</p>\r\n\t\t\t\t\t\t\t<p>You pull the book from the shelf and... Yes! The book is in fact part of a lever mechanism.</p>\r\n\t\t\t\t\t\t\t<p>To your left, a bookcase swings open, and the way forward is open.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\tcase 8.2:\r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>You spend some time perusing the books for signs of magical scribing.</p>\r\n\t\t\t\t\t\t\t<p>Eventually you find a battered volume that seems to have once been a spellbook, but only one spell is currently legible.</p>\r\n\t\t\t\t\t\t\t<p>Still, one is better than none!</p>\r\n\t\t\t\t\t\t\t<p>You add the {this.props.latestSpell.name} spell to your own spellbook.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\tcase 8.3:\r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>You abstract a few of the most interesting looking books and add them to your pack.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\tcase \"8fire\": \r\n\t\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t\t<p>You unleash a {this.props.previousSpell.name} into the room.</p>\r\n\t\t\t\t\t\t\t<p>The room full of old books.</p>\r\n\t\t\t\t\t\t\t<p>...</p>\r\n\t\t\t\t\t\t\t<p>Highly <strong>flammable</strong> books.</p>\r\n\t\t\t\t\t\t\t<p>You have only a few seconds to reflect upon the poor decision you made before the fire has engulfed the entire room, and you along with it.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\tcase 9:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>You are in an almost empty room with a single wooden chest in the center of it. </p>\r\n\t\t\t\t\t{window.$motive === \"wealth\" ? <p>The allure of potential riches in that chest is tempting. After all, that's why you're here, isn't it?</p> : null}\r\n\t\t\t\t\t<p>There is a door on the other side of the room{window.$motive === \"wealth\" ? \", but your attention is focused on the chest\" : null}.</p>\r\n\t\t\t\t\t<p>What will you do?</p>\r\n\t\t\t\t</div>\r\n\t\t\t\tcase 9.1:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You lift the heavy lid of the chest, eager to see what lies within.</p>\r\n\t\t\t\t\t\t<p>Unfortunately, what lies within is a large, fleshy purple tongue.</p>\r\n\t\t\t\t\t\t<p><span className=\"textSmall\">Strange... Why would somebody keep a tongue in a che-</span> Oh! It's a Mimic!</p>\r\n\t\t\t\t\t\t<p>The chest seemingly comes to life and attacks you!</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 9.2:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You heave against the lid of the chest, straining to break the lock.</p>\r\n\t\t\t\t\t\t<p>There! A snapping sound! The heavy lid flies open and you peer inside to see what lies within.</p>\r\n\t\t\t\t\t\t<p>Unfortunately, what lies within is a large, fleshy purple tongue.</p>\r\n\t\t\t\t\t\t<p><span className=\"textSmall\">Strange... Why would somebody keep a tongue in a che-</span> Oh! It's a Mimic!</p>\r\n\t\t\t\t\t\t<p>The chest seemingly comes to life and attacks you!</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 9.3:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>The Rusty Key looks as if it may be a fit for this lock.</p>\r\n\t\t\t\t\t\t<p>You try your luck and insert the key. The chances of success here are slim, given the sheer number of locks and keys in the world.</p>\r\n\t\t\t\t\t\t<p>But wait! A click! The Rusty Key works and unlocks the chest. You peer inside as you open the lid, to see what lies within.</p>\r\n\t\t\t\t\t\t<p>Unfortunately, what lies within is a large, fleshy purple tongue.</p>\r\n\t\t\t\t\t\t<p><span className=\"textSmall\">Strange... Why would somebody keep a tongue in a che-</span> Oh! It's a Mimic!</p>\r\n\t\t\t\t\t\t<p>The chest seemingly comes to life and attacks you!</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"9unlock\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You chant the words of the Unlock spell from your spellbook, complete with the complicated and silly looking hand movements that are required to cast all spells.</p>\r\n\t\t\t\t\t\t<p>Success! You hear a click as the spell unlocks the chest. You peer inside as you open the lid, to see what lies within.</p>\r\n\t\t\t\t\t\t<p>Unfortunately, what lies within is a large, fleshy purple tongue.</p>\r\n\t\t\t\t\t\t<p><span className=\"textSmall\">Strange... Why would somebody keep a tongue in a che-</span> Oh! It's a Mimic!</p>\r\n\t\t\t\t\t\t<p>The chest seemingly comes to life and attacks you!</p>\r\n\t\t\t\t\t</div>\r\n\t\t\tcase \"9loot\":\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>The Mimic shudders violently... And stops moving.</p>\r\n\t\t\t\t\t<p>Its long purple tongue unfolds and reveals the items that it had been protecting.</p>\r\n\t\t\t\t\t<p className=\"textSmall\">Or possibly had just eaten. You're not a mimicologist, you don't know about their diets or feeding habits.</p>\r\n\t\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t\t<div className=\"allocateNotification\">\r\n\t\t\t\t\t\t\t<p>You have gained 4 points to improve your skills!</p>\r\n\t\t\t\t\t\t\t<p className=\"allocateNotificationSubtitle\">(You can allocate them in your Inventory.)</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\tcase 9.4:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t{this.itemRewards()}\r\n\t\t\t\t\t</div>\r\n\t\t\tcase 10:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t<p>You are in a room with a large hole in the ground. Well, more of a chasm really. It stretches across the entire room and is a clear impediment to your progress.</p>\r\n\t\t\t\t\t<p>There appears to be no other way forward. You will have to attempt to cross the chasm.</p>\r\n\t\t\t\t\t<p>What will you do?</p>\r\n\t\t\t\t</div>\r\n\t\t\t\tcase 10.1:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You carefully peer over the edge of the chasm.</p>\r\n\t\t\t\t\t\t<p>It descends into darkness and you cannot see the bottom.</p>\r\n\t\t\t\t\t\t<p>Best not fall in.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"10.2success\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You prepare to jump, balancing carefully before running towards the edge.</p>\r\n\t\t\t\t\t\t<p>You leap... and just barely clear the chasm, landing safely on the other side.</p>\r\n\t\t\t\t\t\t<p>A small piece of stone slips as you land and topples over the edge. You do not hear it hit the bottom.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"10.2damage\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You prepare to jump, balancing carefully before running towards the edge.</p>\r\n\t\t\t\t\t\t<p>You leap... and almost clear the chasm. You slam into the opposite edge and scramble for purchase.</p>\r\n\t\t\t\t\t\t<p>Below you the chasm stretches into darkness, with no bottom in sight.</p>\r\n\t\t\t\t\t\t<p>As you catch your breath, you are able to slowly pull yourself up onto solid ground. You are slightly injured, but safe.</p>\r\n\t\t\t\t\t\t<p>You receive 3 points of damage.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"10.2death\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You prepare to jump, balancing carefully before running towards the edge.</p>\r\n\t\t\t\t\t\t<p>You leap... and fall short.</p>\r\n\t\t\t\t\t\t<p>You plummet into the darkness below.</p>\r\n\t\t\t\t\t\t<p>One day, you will hit the bottom.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 10.3:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>The distance to the other side of this chasm is not so long as to be insurmountable. In fact, for somebody as dextrous as you, it would be <strong>quite</strong> surmountable.</p>\r\n\t\t\t\t\t\t<p>You prepare to jump, balancing carefully before running towards the edge.</p>\r\n\t\t\t\t\t\t<p>With a leap that would be the envy of athletic long jumpers everywhere, you clear the chasm safely.</p>\r\n\t\t\t\t\t\t<p>It's a pity nobody was around to see that.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"10levitate\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You chant the words of the Levitate spell from your spellbook, complete with the complicated and silly looking hand movements that are required to cast all spells, as well as the occasional small hop that is required by the Levitate spell specifically.</p>\r\n\t\t\t\t\t\t<p>Your hopping is not in vain, as the spell takes effect and your final hop lifts you into the air, floating as if weightless.</p>\r\n\t\t\t\t\t\t<p>You float easily across the chasm before the spell wears off, landing safely on the other side.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 10.4:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You have made it safely across the chasm. Ahead of you is the door leading forwards.</p>\r\n\t\t\t\t\t\t{this.props.inventoryContents.find(item => item.id === 10) || this.props.equippedItems.torso.id === 10 ?\r\n\t\t\t\t\t\t\t<p>Now that you're closer, you notice a small table in the corner, with a Healing Potion upon it.</p> :\r\n\t\t\t\t\t\t\t<p>Now that you're closer, you notice an armour stand leaning haphazardly in the corner of the room, complete with a rather fine looking set of Chain Mail.</p>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\tcase 11:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You are in a completely dark room.</p>\r\n\t\t\t\t\t\t<p>There is no light whatsoever.</p>\r\n\t\t\t\t\t\t<p>What will you do?</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"11.1damage\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You attempt to make your way through the pitch black room.</p>\r\n\t\t\t\t\t\t<p>You cannot tell how far into the room you make it before you feel the sharp point of a spike against your skin, stopping you in your tracks.</p>\r\n\t\t\t\t\t\t<p>You receive 2 points of damage.</p>\r\n\t\t\t\t\t\t<p>There is nothing to do but try again.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"11.1success\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You attempt to make your way through the pitch black room.</p>\r\n\t\t\t\t\t\t<p>Moving carefully and stopping abruptly at the slightest indication of something against your skin, you are able to move through the room unharmed, avoiding the dangers present.</p>\r\n\t\t\t\t\t\t<p>Miraculously, you eventually reach out and feel the door leading out of the room. You feel as if you've learned something from your careful navigation of this room.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 11.2:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You pull out your torch{this.props.actionCases.case5[3] === false ? <span> which, thanks to the enchantment upon it, still burns bright</span> : null}. The flame illuminates the room around you.</p>\r\n\t\t\t\t\t\t<p>Surrounding you are jagged spikes that seem to be made from a dull coloured metal, forming some sort of twisted maze through them. Trying to navigate this room without light would be an extremely dangerous experience.</p>\r\n\t\t\t\t\t\t<p>Thanks to your torch, it is instead only a fairly dangerous experience. These spikes look sharp enough to poke you into a kebab if you take a step wrong, but at least you can see where they are and carefully make your way through them.</p>\r\n\t\t\t\t\t\t<p>You make it to exit on the other side of the room unharmed. As a bonus, you feel as if you've learned something from your careful navigation of this room.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"11light\":\r\n\t\t\t\t\treturn <div className=\"content contentExtra\">\r\n\t\t\t\t\t\t<p>You chant the words of the Light spell from your spellbook, though this particular spell has thankfully few of the complicated and silly looking hand movements that are required to cast all spells.</p>\r\n\t\t\t\t\t\t<p>As you complete the spell a ball of light bursts from your palm, illuminating the room around you.</p>\r\n\t\t\t\t\t\t<p>Surrounding you are jagged spikes that seem to be made from a dull coloured metal, forming some sort of twisted maze through them. Trying to navigate this room without light would be an extremely dangerous experience.</p>\r\n\t\t\t\t\t\t<p>Thanks to your Light spell, it is instead only a fairly dangerous experience. These spikes look sharp enough to poke you into a kebab if you take a step wrong, but at least you can see where they are and carefully make your way through them.</p>\r\n\t\t\t\t\t\t<p>You make it to exit on the other side of the room unharmed. As a bonus, you feel as if you've learned something from your careful navigation of this room.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"11fire\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You cast your {this.props.previousSpell.name} into the room.</p>\r\n\t\t\t\t\t\t<p>The light generated by the spell lasts for only a second, and gives you a glimpse of the jagged spikes surrounding you.</p>\r\n\t\t\t\t\t\t<p>Unfortunately, your {this.props.previousSpell.name} just doesn't generate enough light to navigate by.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 11.4:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>Your Dexterity has increased by 2.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\tcase 12:\r\n\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>You are in a room with a large creature with the head of a woman, body of a lion and wings of a bird. A Sphinx!</p>\r\n\t\t\t\t\t\t<p>The Sphinx eyes you as bird of prey might eye a small rodent. She speaks, and her voice is a low rasp.</p>\r\n\t\t\t\t\t\t<p>\"Answer my riddle correctly and you may pass me unscathed. Answer wrong, or fail to answer at all, and I shall attack you.\"</p>\r\n\t\t\t\t\t\t<p>What will you do?</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 12.1:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>The Sphinx looks at you intently for a few moments, then recites the following:</p>\r\n\t\t\t\t\t\t<p>\"I have hands, but no arms and a face, but no eyes.</p>\r\n\t\t\t\t\t\t<p>Without fingers, I point and without feet, I run.</p>\r\n\t\t\t\t\t\t<p>What am I?\"</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 12.2:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>The Sphinx bares her teeth, but you realise with relief that she is smiling.</p>\r\n\t\t\t\t\t\t<p>\"That is the correct answer. You may pass.\"</p>\r\n\t\t\t\t\t\t<p>She raises herself from her relaxed position on the floor moves aside, clearing your path to the doorway on the opposite side of the room.</p>\r\n\t\t\t\t\t\t<p>\"But first, I would reward your perspicacity.\"</p>\r\n\t\t\t\t\t\t<p>You feel the Sphinx's magic wash over your body.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 12.3:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>The Sphinx glares at you.</p>\r\n\t\t\t\t\t\t<p>\"You have failed to answer correctly.\"</p>\r\n\t\t\t\t\t\t<p>She raises herself from her relaxed position on the floor and moves to attack!</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase \"12loot\":\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t<p>The Sphinx staggers backwards and collapses against the wall of the chamber.</p>\r\n\t\t\t\t\t\t<p>\"Enough. I yield. You have bested me.\"</p>\r\n\t\t\t\t\t\t<p>She lowers herself slowly into a sitting position and looks at you respectfully.</p>\r\n\t\t\t\t\t\t<p>\"I cannot defeat you. Take your prizes, and go.\"</p>\r\n\t\t\t\t\t\t{this.props.allocate.allocate === true &&\r\n\t\t\t\t\t\t\t<div className=\"allocateNotification\">\r\n\t\t\t\t\t\t\t\t<p>You have gained 8 points to improve your skills!</p>\r\n\t\t\t\t\t\t\t\t<p className=\"allocateNotificationSubtitle\">(You can allocate them in your Inventory.)</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\tcase 12.4:\r\n\t\t\t\t\treturn <div className=\"content\">\r\n\t\t\t\t\t\t{this.props.actionCases.case12[0] === false ? <p>Your maximum hit points have increased by 5!</p> : null}\r\n\t\t\t\t\t\t{this.itemRewards()}\r\n\t\t\t\t\t</div>\r\n\t\t};\r\n\t};\r\n\r\n\titemRewards = () => {\r\n\t\tlet text = [];\r\n\t\tfor (let x = 0; x < this.props.receivedItems.length; x++) {\r\n\t\t\ttext.push(<p key={x}>You receive a {this.props.receivedItems[x].name}.</p>);\r\n\t\t};\r\n\t\treturn text;\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn this.contentSelect();\r\n\t}\r\n}\r\n\r\nexport default Content;","import React from 'react';\r\n\r\nclass Equipment extends React.Component {\r\n\trender() {\r\n\t\treturn <div id=\"equipmentDiv\">\r\n\t\t\t<div className=\"equipmentContainerDiv\">\r\n\t\t\t\t<div className=\"equipmentLabel\" id=\"labelHead\">Head: </div>\r\n\t\t\t\t<div className=\"equipment\" id=\"equippedHead\"onClick={() => this.props.itemUnequipHandler(this.props.equippedItems.head)}>{this.props.equippedItems.head.name}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"equipmentContainerDiv\">\r\n\t\t\t\t<div className=\"equipmentLabel\" id=\"labelTorso\">Torso: </div>\r\n\t\t\t\t<div className=\"equipment\" id=\"equippedTorso\"onClick={() => this.props.itemUnequipHandler(this.props.equippedItems.torso)}>{this.props.equippedItems.torso.name}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"equipmentContainerDiv\">\r\n\t\t\t\t<div className=\"equipmentLabel\" id=\"labelLegs\">Legs: </div>\r\n\t\t\t\t<div className=\"equipment\" id=\"equippedLegs\"onClick={() => this.props.itemUnequipHandler(this.props.equippedItems.legs)}>{this.props.equippedItems.legs.name}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"equipmentContainerDiv\">\r\n\t\t\t\t<div className=\"equipmentLabel\" id=\"labelBoots\">Boots: </div>\r\n\t\t\t\t<div className=\"equipment\" id=\"equippedBoots\"onClick={() => this.props.itemUnequipHandler(this.props.equippedItems.boots)}>{this.props.equippedItems.boots.name}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"equipmentContainerDiv\">\r\n\t\t\t\t<div className=\"equipmentLabel\" id=\"labelGloves\">Gloves: </div>\r\n\t\t\t\t<div className=\"equipment\" id=\"equippedGloves\"onClick={() => this.props.itemUnequipHandler(this.props.equippedItems.gloves)}>{this.props.equippedItems.gloves.name}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"equipmentContainerDiv\">\r\n\t\t\t\t<div className=\"equipmentLabel\" id=\"labelWeapon\">Weapon: </div>\r\n\t\t\t\t<div className=\"equipment\" id=\"equippedWeapon\" onClick={() => this.props.itemUnequipHandler(this.props.equippedItems.weapon)}>{this.props.equippedItems.weapon.name}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t}\r\n}\r\n\r\nexport default Equipment;","import React from 'react';\r\n\r\nclass HitPointsUpdate extends React.Component {\r\n\t\r\n\tcomponentDidMount = () => {\r\n\t\tlet timeout = setTimeout(() => {\r\n\t\t\tthis.props.healingUpdate();\r\n\t\t\tclearTimeout(timeout);\r\n\t\t}, 4000);\r\n\t};\r\n\t\r\n\tcomponentWillUnmount() { //Remove timeout if the component is unmounted before the timer runs down.\r\n\t\tclearTimeout(this.timeout);\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn <span className=\"hitPointUpdateDisplay green\">+{this.props.healing}</span>\r\n\t}\r\n}\r\n\r\nexport default HitPointsUpdate;","import React from 'react';\r\nimport HitPointsUpdate from './hitPointsUpdate.js';\r\n\r\nclass HitPoints extends React.Component {\r\n\t\r\n\tplayerHitPointsColour = () => { //Changes the colour of the player's hit point indicator.\r\n\t\tif (this.props.hitPoints >= (this.props.maxHitPoints / 3 * 2)) {\r\n\t\t\treturn <span className=\"green\">{this.props.hitPoints}</span>\r\n\t\t} else if (this.props.hitPoints > (this.props.maxHitPoints / 3)) {\r\n\t\t\treturn <span className=\"yellow\">{this.props.hitPoints}</span>\r\n\t\t} else {\r\n\t\t\treturn <span className=\"red\">{this.props.hitPoints}</span>\r\n\t\t};\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn <div className=\"hitPointsDiv\">\r\n\t\t\t<p>Your HP: {this.playerHitPointsColour()} / <span className=\"green\">{this.props.maxHitPoints}</span></p>\r\n\t\t\t{this.props.healing > 0 ? <HitPointsUpdate {...this.props} /> : null}\r\n\t\t</div>\r\n\t}\r\n}\r\n\r\nexport default HitPoints;","import React from 'react';\r\n\r\nclass Armour extends React.Component {\r\n\t\r\n\tarmourDisplay = () => {\r\n\t\tif (this.props.armour !== undefined) {\r\n\t\t\treturn this.props.armour;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn <p>Armour Rating: {this.armourDisplay()}</p>\r\n\t};\r\n};\r\n\r\nexport default Armour;","import React from 'react';\r\nimport Equipment from './equipment.js';\r\nimport Statistics from './statistics.js';\r\nimport HitPoints from './hitPoints.js';\r\nimport Armour from './armour.js';\r\n\r\nclass Inventory extends React.Component {\r\n\tcloseInventory = () => {\r\n\t\tthis.props.mainHandler(window.$inventoryValueSnapshot, window.$inventoryActionSnapshot);\r\n\t}\r\n\trender() {\r\n\t\treturn <div id=\"inventoryDiv\">\r\n\t\t\t<div className=\"hitPoints\"><HitPoints {...this.props}/></div>\r\n\t\t\t<div className=\"armour\"><Armour {...this.props}/></div>\r\n\t\t\t<Equipment equippedItems={this.props.equippedItems}\r\n\t\t\t\t\t   itemUnequipHandler={this.props.itemUnequipHandler}/>\r\n\t\t\t<Statistics {...this.props}\r\n\t\t\t\t\t\tstatsHandler={this.props.statsHandler}\r\n\t\t\t\t\t\tmainHandler={this.props.mainHandler}\r\n\t\t\t\t\t\tallocateHandler={this.props.allocateHandler}/>\r\n\t\t\t{this.props.allocate.allocate === false &&\r\n\t\t\t\t<div id=\"closeInventoryButton\"onClick={this.closeInventory} aria-label=\"Close\">❌</div>\r\n\t\t\t}\r\n\t\t</div>\r\n\t}\r\n}\r\n\r\nexport default Inventory;","import React from 'react';\r\n\r\nclass InventoryButton extends React.Component {\r\n\tinventory = () => this.props.mainHandler(\"inventory\", this.props.inventoryContents.length);\r\n\r\n\trender() {\r\n\t\treturn <div id=\"characterButton\" value=\"Character\" onClick={this.inventory}>Inventory</div>\r\n\t}\r\n}\r\n\r\nexport default InventoryButton;","import React from 'react';\r\nimport HitPoints from './hitPoints.js';\r\nimport Armour from './armour.js';\r\n\r\nclass CombatContent extends React.Component {\r\n\tenemyHealthDescription = () => { //Describes how the enemy looks based on remaining HP.\r\n\t\tif (this.props.enemy.hitPoints === this.props.enemy.maxHitPoints) {\r\n\t\t\treturn <p>The {this.props.enemy.name} is <span className=\"green\">unharmed.</span></p>\r\n\t\t} else if (this.props.enemy.hitPoints >= (this.props.enemy.maxHitPoints / 3 * 2)) {\r\n\t\t\treturn <p>The {this.props.enemy.name} is <span className=\"green\">slightly injured.</span></p>\r\n\t\t} else if (this.props.enemy.hitPoints >= (this.props.enemy.maxHitPoints / 2)) {\r\n\t\t\treturn <p>The {this.props.enemy.name} is <span className=\"yellow\">somewhat injured.</span></p>\r\n\t\t} else if (this.props.enemy.hitPoints >= (this.props.enemy.maxHitPoints / 3)) {\r\n\t\t\treturn <p>The {this.props.enemy.name} is <span className=\"yellow\">quite injured.</span></p>\r\n\t\t} else if (this.props.enemy.hitPoints > 1) {\r\n\t\t\treturn <p>The {this.props.enemy.name} is <span className=\"red\">badly injured.</span></p>\r\n\t\t} else if (this.props.enemy.hitPoints === 1) {\r\n\t\t\treturn <p>The {this.props.enemy.name} <span className=\"red\">looks as if a gentle breeze would topple them.</span></p>\r\n\t\t} else if (this.props.enemy.hitPoints <= 0) {\r\n\t\t\treturn <p>The {this.props.enemy.name} is <span className=\"red\">defeated!</span></p>\r\n\t\t};\r\n\t};\r\n\t\r\n\tturnDescription = () => { //Specifies which turn it is.\r\n\t\tif (this.props.enemy.hitPoints > 0) {\r\n\t\t\tif (this.props.combatTurn === \"player\") {\r\n\t\t\t\treturn <p className=\"combatTurn\">It is your turn.</p>\r\n\t\t\t} else {\r\n\t\t\t\treturn <p className=\"combatTurn\">It is the {this.props.enemy.name}'s turn.</p>\r\n\t\t\t};\r\n\t\t}\t\r\n\t};\r\n\t\r\n\tactionDescription = () => { //Describes your action taken and enemy action taken.\r\n\t\tconst enemyAction = this.props.enemyAction;\r\n\t\tconst weapon = this.props.equippedItems.weapon;\r\n\t\tlet actionPrint = [];\r\n\t\tif (this.props.combatTurn === \"player\") { //Enemy action\r\n\t\t\tactionPrint = enemyAction.map(element => element.description);\r\n\t\t\tif (this.props.enemyDamage.length !== 0) {\r\n\t\t\t\tactionPrint = actionPrint.map((element, index)=> <div key={index}><p>{element}</p><p>You receive <span className=\"enemyDamageNumber\">{this.props.enemyDamage[index] < 0 ? 0 : this.props.enemyDamage[index]}</span> damage.</p></div>);\t\r\n\t\t\t};\r\n\t\t\treturn actionPrint\r\n\t\t} else { //Player action\r\n\t\t\tif (this.props.playerDamage > 0) {\r\n\t\t\t\tif (weapon.id !== 3) {\r\n\t\t\t\treturn <p>You hit the {this.props.enemy.name} for <span className=\"damageNumber\">{this.props.playerDamage}<span className=\"damageNumberInfo\">Rolled {this.props.playerDamageBreakdown[0]} out of {Number(weapon.damage.substring(0, weapon.damage.indexOf('d')) * weapon.damage.substring(weapon.damage.length, weapon.damage.indexOf('d')+1))}<br />+ {this.props.playerDamageBreakdown[1]} from your {weapon.stat}{weapon.bonus > 0 ? <span><br />+ {weapon.bonus} from your weapon</span> : null}.</span></span> damage with your {weapon.name}.</p>\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst magicBonus = () => {\r\n\t\t\t\t\t\tlet equipment = this.props.equippedItems;\r\n\t\t\t\t\t\tlet equipmentBonus = [];\r\n\t\t\t\t\t\tlet totalBonus;\r\n\t\t\t\t\t\tfor (let x in equipment) {\r\n\t\t\t\t\t\t\tif (equipment[x].hasOwnProperty(\"magicBonus\")) {\r\n\t\t\t\t\t\t\t\tequipmentBonus.push(equipment[x].magicBonus);\r\n\t\t\t\t\t\t\t\ttotalBonus = equipmentBonus.reduce((a, b) => a + b);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn totalBonus;\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn <p>You hit the {this.props.enemy.name} for <span className=\"damageNumber\">{this.props.playerDamage}<span className=\"damageNumberInfo\">Rolled {this.props.playerDamageBreakdown[0]} out of {Number(this.props.combatPreviousSpell.damage.substring(0, this.props.combatPreviousSpell.damage.indexOf('d')) * this.props.combatPreviousSpell.damage.substring(this.props.combatPreviousSpell.damage.length, this.props.combatPreviousSpell.damage.indexOf('d')+1))}<br />+ {this.props.playerDamageBreakdown[1]} from your intelligence{magicBonus() > 0 ? <span><br />+ {magicBonus()} from your equipment</span> : null}.</span></span> damage with your {this.props.combatPreviousSpell.name}.</p>\r\n\t\t\t\t};\r\n\t\t\t} else if (this.props.playerHealing > 0) {\r\n\t\t\t\treturn <p>You restore  <span className=\"green\">{this.props.playerHealing}</span> Hit Points.</p>\r\n\t\t\t} else if (this.props.combatPreviousSpell.id === 5) {\r\n\t\t\t\treturn <p>You cast the Shield spell on yourself, increasing your Armour Rating by <span className=\"green\">3</span>.</p>\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\trender() {\r\n\t\treturn <div className=\"content\">\r\n\t\t\t<p className=\"combatHeader\">You are fighting a {this.props.enemy.name}.</p>\r\n\t\t\t<div className=\"combatPlayerHitPoints\"><HitPoints {...this.props}/></div>\r\n\t\t\t<div className=\"combatPlayerArmour\"><Armour {...this.props}/></div>\r\n\t\t\t<div className=\"enemyHealthDescription\">{this.enemyHealthDescription()}</div>\r\n\t\t\t{this.actionDescription()}\r\n\t\t\t{this.props.enemy.hitPoints <= 0 &&\r\n\t\t\t\t<div className=\"combatVictoryDescription\">\r\n\t\t\t\t\t<p>Your enemy falls before you.</p>\r\n\t\t\t\t\t<p>You are victorious!</p>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{this.turnDescription()}\r\n\t\t</div>\r\n\t};\r\n};\r\n\r\nexport default CombatContent;","import React from 'react';\r\nimport Content from './content.js';\r\nimport Inventory from './inventory.js';\r\nimport InventoryButton from './inventoryButton.js'\r\nimport CombatContent from './combatContent.js';\r\n\r\nclass Text extends React.Component {\t\r\n\tgetSnapshotBeforeUpdate(prevProps) {\r\n\t\treturn prevProps;\r\n\t};\r\n\t\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst value = (prevProps.value);\r\n\t\tconst actionNum = (prevProps.actionNum);\r\n\t\tif (value !== \"inventory\") {\r\n\t\t\tif (value !== \"spellScroll\") {\r\n\t\t\t\tif (value !== \"spellScrollNoSpellbook\") {\r\n\t\t\t\t\tif (value !== \"allSpells\") {\r\n\t\t\t\t\t\twindow.$inventoryValueSnapshot = value;\t\r\n\t\t\t\t\t\twindow.$inventoryActionSnapshot = actionNum;\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\t\r\n\trender = () => {\r\n\t\tif (this.props.value === \"inventory\") {\r\n\t\t\treturn <div className=\"text\">\r\n\t\t\t\t<Inventory  {...this.props}\r\n\t\t\t\t\t\t\tmainHandler={this.props.mainHandler}\r\n\t\t\t\t\t\t\tstatsHandler={this.props.statsHandler}\r\n\t\t\t\t\t\t\tallocateHandler={this.props.allocateHandler}\r\n\t\t\t\t\t\t\tinventoryHandler={this.props.inventoryHandler}\r\n\t\t\t\t\t\t\titemUnequipHandler={this.props.itemUnequipHandler}/>\r\n\t\t\t</div>\r\n\t\t} else if (this.props.value === \"combat\") {\r\n\t\t\treturn <div className=\"text\">\r\n\t\t\t\t<CombatContent {...this.props}\r\n\t\t\t\t\t\t\t   mainHandler={this.props.mainHandler}\r\n\t\t\t\t\t\t\t   statsHandler={this.props.statsHandler}\r\n\t\t\t\t\t\t\t   allocateHandler={this.props.allocateHandler}/>\r\n\t\t\t</div>\r\n\t\t} else if (this.props.value <= 3){\r\n\t\t\treturn <div className=\"text\">\r\n\t\t\t\t<Content {...this.props}\r\n\t\t\t\t\t\t mainHandler={this.props.mainHandler}\r\n\t\t\t\t\t\t statsHandler={this.props.statsHandler}\r\n\t\t\t\t\t\t allocateHandler={this.props.allocateHandler}/>\r\n\t\t\t</div>\r\n\t\t} else {\r\n\t\t\treturn <div className=\"text\">\r\n\t\t\t\t{this.props.value !== \"emptySpell\" ?\r\n\t\t\t\t\tthis.props.value !== \"8fire\" ?\r\n\t\t\t\t\t\tthis.props.value !== \"spellScroll\" ?\r\n\t\t\t\t\t\t\tthis.props.value !== \"spellScrollNoSpellbook\" ?\r\n\t\t\t\t\t\t\t\tthis.props.value !== \"allSpells\" ?\r\n\t\t\t\t\t\t\t\t\t<InventoryButton {...this.props}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t mainHandler={this.props.mainHandler}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t inventoryContents={this.props.inventoryContents}/>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t: null\r\n\t\t\t\t: null}\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t \t<Content {...this.props}\r\n\t\t\t\t\t\t mainHandler={this.props.mainHandler}\r\n\t\t\t\t\t\t statsHandler={this.props.statsHandler}\r\n\t\t\t\t\t\t allocateHandler={this.props.allocateHandler}/>\r\n\t\t\t</div>\r\n\t\t};\r\n\t};\r\n};\r\n\r\nexport default Text;","const ItemList = [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tname: \"Sword\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"1d8\",\r\n\t\t\tbonus: 0,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: \"A short iron sword that excels at sharply poking things.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tname: \"Shortbow\",\r\n\t\t\tstat: \"dexterity\",\r\n\t\t\tdamage: \"1d8\",\r\n\t\t\tbonus: 0,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: \"A shortbow that would actually be rather large if you were a dwarf.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tname: \"Spellbook\",\r\n\t\t\tstat: \"intelligence\",\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: \"A book of magical spells. Neatly colour coded and organized.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\tname: \"Torch\",\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: false,\r\n\t\t\tdescription: \"A flaming length of wood that provides light and fire.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 5,\r\n\t\t\tname: \"Leather Helmet\",\r\n\t\t\tarmour: 1,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"head\",\r\n\t\t\tdescription: \"A sturdy, though slightly dirty, leather helmet for protecting the wearer's squishy brain.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 6,\r\n\t\t\tname: \"Healing Potion\",\r\n\t\t\tstat: \"vitality\",\r\n\t\t\thealing: \"1d6\",\r\n\t\t\tbonus: 0,\r\n\t\t\tmagic: true,\r\n\t\t\tuseable: true,\r\n\t\t\ttreasure: 1,\r\n\t\t\tdescription: \"A small glass bottle containing a lightly bubbling red liquid. The higher your vitality, the more hit points are restored when drinking this potion.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 7,\r\n\t\t\tname: \"Collection of Books\",\r\n\t\t\tmagic: false,\r\n\t\t\tuseable: false,\r\n\t\t\tdescription: \"A few particularly interesting looking books, taken from one of Malthazor's libraries.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 8,\r\n\t\t\tname: \"Rusty Key\",\r\n\t\t\tmagic: false,\r\n\t\t\tuseable: false,\r\n\t\t\ttreasure: 2,\r\n\t\t\tdescription: \"An old key.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 9,\r\n\t\t\tname: \"Spell Scroll\",\r\n\t\t\tmagic: true,\r\n\t\t\tuseable: true,\r\n\t\t\ttreasure: 1,\r\n\t\t\tdescription: \"A magical scroll containing instructions for a spell.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 10,\r\n\t\t\tname: \"Chain Mail\",\r\n\t\t\tarmour: 3,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"torso\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tdescription: \"A shirt of metal rings melded together to protect the wearer. Functional, but noisy.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 11,\r\n\t\t\tname: \"Mighty Axe of Chopping\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"1d8\",\r\n\t\t\tbonus: 1,\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tlevel: 5,\r\n\t\t\tdescription: <span>A magical hand axe that is probably intended for chopping up firewood, but should work just as well on Malthazor's guardians.<br />(+1 Damage Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 12,\r\n\t\t\tname: \"Piercing Crossbow\",\r\n\t\t\tstat: \"dexterity\",\r\n\t\t\tdamage: \"1d10\",\r\n\t\t\tbonus: 1,\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tlevel: 5,\r\n\t\t\tdescription: <span>A magical crossbow that is ideal for overcoming tough enemy armour (or anything else that gets in the way).<br />(+1 Damage Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 13,\r\n\t\t\tname: \"Sword of Vengeance\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"3d10\",\r\n\t\t\tbonus: 5,\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\tlevel: 15,\r\n\t\t\tdescription: <span>A sword magically enchanted with a spirit of vengeance.<br />(+5 Damage Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 14,\r\n\t\t\tname: \"Bow of Vengeance\",\r\n\t\t\tstat: \"dexterity\",\r\n\t\t\tdamage: \"3d10\",\r\n\t\t\tbonus: 5,\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\tlevel: 15,\r\n\t\t\tdescription: <span>A bow magically enchanted with a spirit of vengeance.<br />(+5 Damage Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 15,\r\n\t\t\tname: \"Spear\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"1d10\",\r\n\t\t\tarmour: 1,\r\n\t\t\tbonus: 0,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tlevel: 6,\r\n\t\t\tdescription: \"A long pole of wood with a pointy bit on the end. Provides an armour bonus due to enemies being kept at a distance from you thanks to the aforementioned pointy bit.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 16,\r\n\t\t\tname: \"Enchanted Spear\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"1d10\",\r\n\t\t\tarmour: 1,\r\n\t\t\tbonus: 1,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tlevel: 8,\r\n\t\t\tdescription: <span>A long pole of wood with a pointy bit on the end. Provides an armour bonus due to enemies being kept at a distance from you thanks to the aforementioned pointy bit. <br />(+1 Damage Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 17,\r\n\t\t\tname: \"Battleaxe\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"1d12\",\r\n\t\t\tbonus: 0,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tlevel: 2,\r\n\t\t\tdescription: \"A hefty two-handed axe that would probably be overkill to use to eat breakfast.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 18,\r\n\t\t\tname: \"Warhammer\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"1d10\",\r\n\t\t\tbonus: 0,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tlevel: 2,\r\n\t\t\tdescription: \"A large hammer for hitting very large nails (or peoples' faces).\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 19,\r\n\t\t\tname: \"Crushing Warhammer\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"1d10\",\r\n\t\t\tbonus: 1,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tlevel: 8,\r\n\t\t\tdescription: <span>A warhammer designed for crushing rocks and the sternums of goblins.<br />(+1 Damage Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 20,\r\n\t\t\tname: \"Sundering Battleaxe\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tdamage: \"1d12\",\r\n\t\t\tbonus: 1,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tlevel: 9,\r\n\t\t\tdescription: <span>A battleaxe that surpasses all others at chopping firewood. So... You know, if the dungeon delving doesn't work out, you have options.<br />(+1 Damage Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 21,\r\n\t\t\tname: \"Wizard Robes\",\r\n\t\t\tstat: \"intelligence\",\r\n\t\t\tarmour: 2,\r\n\t\t\tmagicBonus: 1,\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"torso\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tlevel: 5,\r\n\t\t\tdescription: <span>A set of handsome Wizard Robes that provide a little magical protection and increase the potency of your spells.<br />(+1 Spell Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 22,\r\n\t\t\tname: \"Magician Robes\",\r\n\t\t\tstat: \"intelligence\",\r\n\t\t\tarmour: 4,\r\n\t\t\tmagicBonus: 2,\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"torso\",\r\n\t\t\ttreasure: 4,\r\n\t\t\tlevel: 10,\r\n\t\t\tdescription: <span>A set of magical Robes designed to protect the wearer from magical mishaps caused, inevitably, by their own hubris.<br />(+2 Spell Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 23,\r\n\t\t\tname: \"Archmage Robes\",\r\n\t\t\tstat: \"intelligence\",\r\n\t\t\tarmour: 6,\r\n\t\t\tmagicBonus: 3,\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"torso\",\r\n\t\t\ttreasure: 5,\r\n\t\t\tlevel: 15,\r\n\t\t\tdescription: <span>A splendid set of magical Robes fit for wearing by only the most experienced mages. Or random nobodies who have been running around a dungeon for a few hours.<br />(+3 Spell Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 24,\r\n\t\t\tname: \"Bow of Wounding\",\r\n\t\t\tstat: \"dexterity\",\r\n\t\t\tdamage: \"2d8\",\r\n\t\t\tbonus: 2,\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"weapon\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tlevel: 12,\r\n\t\t\tdescription: <span>A bow enchanted to be especially good at skewering targets. It was originally designed for pig hunting, but since pigs are often domesticated, it was repurposed into a weapon of war instead.<br />(+2 Damage Bonus)</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 25,\r\n\t\t\tname: \"Plate Armour\",\r\n\t\t\tstat: \"strength\",\r\n\t\t\tarmour: 10,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"torso\",\r\n\t\t\ttreasure: 5,\r\n\t\t\tlevel: 15,\r\n\t\t\tdescription: <span>A set of heavy plate armour, sure to protect you from any amount of knives and forks.</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 26,\r\n\t\t\tname: \"Leather Armour\",\r\n\t\t\tstat: \"dexterity\",\r\n\t\t\tarmour: 8,\r\n\t\t\tmagic: false,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"torso\",\r\n\t\t\ttreasure: 5,\r\n\t\t\tlevel: 15,\r\n\t\t\tdescription: <span>A leather jerkin that provides good protection. The skill required isn't so much for putting it on as it is for moving without making an absolute racket.</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 999,\r\n\t\t\tname: \"Message from Spikey\",\r\n\t\t\tmagic: true,\r\n\t\t\tequipable: true,\r\n\t\t\tequipSlot: \"gloves\",\r\n\t\t\tdescription: \"In flowing handwriting it reads: 'This is for testing and debugging purposes only. Blasted Kalphites have got all over the gears and sprockets and whatnots!'\"\r\n\t\t},\r\n\t];\r\n\t\r\nexport default ItemList","function Chambers(props) {\r\n\tconst chamber = props.chambers[0];\r\n\tlet action = 0;\r\n\tprops.chamberHandler(chamber);\r\n\r\n\tswitch(chamber) { //Assigns number of actions for each returned chamber.\r\n\t\tdefault:\r\n\t\t\tconsole.log(\"No actionNum found for current value.\")\r\n\t\t\tbreak;\r\n\t\tcase 8: //Library\r\n\t\t\tif (window.$motive !== \"curiosity\") {\r\n\t\t\t\taction = 3;\r\n\t\t\t} else {\r\n\t\t\t\taction = 4;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase 9: //Mimic Room\r\n\t\t\tif (window.$motive === \"wealth\") {\r\n\t\t\t\taction = 1;\r\n\t\t\t} else {\r\n\t\t\t\taction = 3;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase 10: //Chasm Room\r\n\t\t\taction = 3;\r\n\t\t\tbreak;\r\n\t\tcase 11: //Dark Room\r\n\t\t\taction = 2;\r\n\t\t\tbreak;\r\n\t\tcase 12: //Sphinx Room\r\n\t\t\taction = 2;\r\n\t\t\tbreak;\r\n\t\tcase 13: //Spikey Room\r\n\t\t\taction = 2;\r\n\t\t\tbreak;\r\n\t\tcase 14: //Beny Room\r\n\t\t\taction = 2;\r\n\t\t\tbreak;\r\n\t};\r\n\t\r\n\treturn [chamber, action];\r\n}\r\n\r\nexport default Chambers;","function RollD20(min, max) {\r\n\tmin = Math.ceil(1);\r\n\tmax = Math.floor(20);\r\n\tlet result = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\treturn result;\r\n}\r\n\r\nexport default RollD20;","const SpellList = [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tname: \"Firebolt\",\r\n\t\t\tcanBeUsedInCombat: true,\r\n\t\t\tdamage: \"1d8\",\r\n\t\t\ttreasure: 1,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: \"A small mote of conjured fire, usually thrown at a target. Enough to light a candle or small fire, probably not enough to set a liar's pants on fire.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tname: \"Unlock\",\r\n\t\t\tcanBeUsedInCombat: false,\r\n\t\t\ttreasure: 1,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: <span>A spell that can be used to unlock any non-magical lock when touched. Now, be good with this one. It's not <strong>technically</strong> legal, but... You're magic. What are they going to do, arrest you?</span>\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tname: \"Light\",\r\n\t\t\tcanBeUsedInCombat: false,\r\n\t\t\ttreasure: 1,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: \"Summons a ball of magical light to illuminate your surroundings. Magical lampshade sold separately.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\tname: \"Heal\",\r\n\t\t\tcanBeUsedInCombat: true,\r\n\t\t\thealing: \"2d4\",\r\n\t\t\ttreasure: 1,\r\n\t\t\tcooldown: 4,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: \"Restores some hit points to you. Requires 3 chambers or turns in combat to cooldown between uses. Speak to your healer if side effects persist for more than 3 turns.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 5,\r\n\t\t\tname: \"Shield\",\r\n\t\t\tcanBeUsedInCombat: true,\r\n\t\t\ttreasure: 1,\r\n\t\t\tduration: 4,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: \"Conjures a shield of magical energy to protect you. Increases your armour rating by 3 for 3 turns in combat. Lighter than an actual shield.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 6,\r\n\t\t\tname: \"Levitate\",\r\n\t\t\tcanBeUsedInCombat: false,\r\n\t\t\ttreasure: 1,\r\n\t\t\tlevel: 0,\r\n\t\t\tdescription: \"Magically lifts you from the ground (or other surface) for a short while, allowing you to float in the air. Understanding of gravity not required.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 7,\r\n\t\t\tname: \"Lightning Bolt\",\r\n\t\t\tcanBeUsedInCombat: true,\r\n\t\t\tdamage: \"2d10\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tcooldown: 4,\r\n\t\t\tlevel: 14,\r\n\t\t\tdescription: \"A blast of lightning that will electrify anything it hits. Do NOT use it in the bath. Seriously. There have been legal proceedings about this.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 8,\r\n\t\t\tname: \"Fireball\",\r\n\t\t\tcanBeUsedInCombat: true,\r\n\t\t\tdamage: \"3d6\",\r\n\t\t\ttreasure: 2,\r\n\t\t\tcooldown: 3,\r\n\t\t\tlevel: 12,\r\n\t\t\tdescription: \"A small mote of conjured fire that will turn into a large explosion of fire on contact with a target. Not suitable for children under 3 years old.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 9,\r\n\t\t\tname: \"Rejuvenate\",\r\n\t\t\tcanBeUsedInCombat: true,\r\n\t\t\thealing: \"4d4\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tcooldown: 6,\r\n\t\t\tlevel: 15,\r\n\t\t\tdescription: \"Restores quite a lot of hit points to you. Requires 5 chambers or turns in combat to cooldown between uses. Not an effective counter to the aging process.\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 10,\r\n\t\t\tname: \"Blade Storm\",\r\n\t\t\tcanBeUsedInCombat: true,\r\n\t\t\tdamage: \"5d4\",\r\n\t\t\ttreasure: 3,\r\n\t\t\tcooldown: 5,\r\n\t\t\tlevel: 16,\r\n\t\t\tdescription: \"Conjures a cloud of magical knives to attack your target. Can also be used to save time in the kitchen (minimum safe distance advised).\"\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 11,\r\n\t\t\tname: \"Inferno\",\r\n\t\t\tcanBeUsedInCombat: true,\r\n\t\t\tdamage: \"10d4\",\r\n\t\t\tcooldown: 5,\r\n\t\t\tlevel: 20,\r\n\t\t\tdescription: \"An immensely powerful spell given to you by a very clever and impressive old man (who also wrote this description).\"\r\n\t\t},\r\n\t];\r\nexport default SpellList","function RollD10(min, max) {\r\n\tmin = Math.ceil(1);\r\n\tmax = Math.floor(10);\r\n\tlet result = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\treturn result;\r\n}\r\n\r\nexport default RollD10;","import React from 'react';\r\nimport Items from './itemList.js';\r\nimport Chambers from './chambers.js';\r\nimport RollD20 from './Dice/d20.js';\r\nimport SpellList from './spellList';\r\nimport RollD10 from './Dice/d10.js';\r\n\r\nlet v;\r\nlet a;\r\nlet c;\r\nclass Actions extends React.Component {\r\n\t\r\n\tcomponentDidMount(key) {\r\n\t\tswitch(this.props.value) {\r\n\t\t\tdefault: \r\n\t\t\t\treturn \"Confound it! This is a broken bit. You shouldn't be able to read this.\"\r\n\t\t\tcase \"emptySpell\":\r\n\t\t\t\treturn \"Continue.\"\r\n\t\t\tcase \"spellScrollNoSpellbook\":\r\n\t\t\t\treturn \"Continue.\"\r\n\t\t\tcase \"spellScroll\":\r\n\t\t\t\treturn \"Continue.\"\r\n\t\t\tcase \"allSpells\":\r\n\t\t\t\treturn \"Continue, but more intelligently.\"\r\n\t\t\tcase 0:\r\n\t\t\t\tswitch(key) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn \"Wealth. You have heard that great treasure may be found within Malthazor's hoard. You intend to confirm or deny those rumours for good.\"\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\treturn \"Revenge. Malthazor's cruelty took somebody that you cared about. You mean to avenge yourself upon him.\"\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\treturn \"Curiosity. Malthazor may be mad, but his collection of arcane and esoteric knowledge is said to be second to none.\"\r\n\t\t\t\t}\r\n\t\t\tcase 1:\r\n\t\t\t\treturn \"Continue.\"\r\n\t\t\tcase 2:\r\n\t\t\t\treturn \"Continue.\"\r\n\t\t\tcase 3:\r\n\t\t\t\tswitch(key) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn \"You have brought your trusty sword to face whatever dangers you may find. Your abilities with the sword are based on your Strength.\"\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\treturn \"You have come equipped with your hunting bow to fell dangers before they can reach you. Your abilities with the bow are based on your Dexterity.\"\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\treturn \"You carry a book of spells to keep you safe from danger, though only a few pages are currently filled in. Your abilities with spells are based on your Intelligence.\"\r\n\t\t\t\t}\r\n\t\t\tcase 4:\r\n\t\t\t\treturn \"Continue.\"\r\n\t\t\tcase 5:\r\n\t\t\t\tswitch(key) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn \"Cross the room and enter the passageway.\"\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (this.props.actionCases.case5[1] === true) {\r\n\t\t\t\t\t\t\treturn \"Return through the door behind you. Coming here was a mistake.\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn <span className=\"locked\">Return through the door behind you. Coming here was a mistake.</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tif (this.props.stats.stat.strength >= 3 && this.props.actionCases.case5[2] === true) {\r\n\t\t\t\t\t\t\treturn \"Take a torch from one of the wall sconces. (Requires 3 Strength)\"\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn <span className=\"locked\">Take a torch from one of the wall sconces. (Requires 3 Strength)</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tif (this.props.stats.stat.intelligence >= 3 && this.props.actionCases.case5[3] === true) {\r\n\t\t\t\t\t\t\treturn \"Examine the torches around the room. (Requires 3 Intelligence)\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn <span className=\"locked\">Examine the torches around the room. (Requires 3 Intelligence)</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcase 5.1:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\t\tcase 5.2:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\t\tcase 5.3:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\tcase 6:\r\n\t\t\t\treturn \"Defend yourself!\"\r\n\t\t\t\tcase \"6loot\":\r\n\t\t\t\t\tif (this.props.inventoryContents.find(item => item.id === 4)) {\r\n\t\t\t\t\t\treturn \"Take the helmet and healing potion.\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn \"Take the helmet.\"\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 6.1:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\tcase 7:\r\n\t\t\t\treturn \"Continue into the dungeon.\"\r\n\t\t\tcase 8:\r\n\t\t\t\tswitch(key) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn \"Attempt to find an exit from this room. (50% chance of painless success)\"\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (this.props.actionCases.case8[1] === true) {\r\n\t\t\t\t\t\t\tif (this.props.stats.stat.intelligence >= 6) {\r\n\t\t\t\t\t\t\t\treturn \"Attempt to find an exit from this room. (Requires 6 Intelligence)\"\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn <span className=\"locked\">Attempt to find an exit from this room. (Requires 6 Intelligence)</span>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn <span className=\"locked\">Attempt to find an exit from this room. (Requires 6 Intelligence)</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tif (this.props.actionCases.case8[2] === true) {\r\n\t\t\t\t\t\t\tif (this.props.equippedItems.weapon.id === 3 || this.props.inventoryContents.find(item => item.id === 3)) {\r\n\t\t\t\t\t\t\t\treturn \"Search the books for any spells that might be useful to you. (Requires a Spellbook)\"\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn <span className=\"locked\">Search the books for any spells that might be useful to you. (Requires a Spellbook)</span>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn <span className=\"locked\">Search the books for any spells that might be useful to you. (Requires a Spellbook)</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tif (window.$motive === \"curiosity\") {\r\n\t\t\t\t\t\t\tif (this.props.actionCases.case8[3] === true) {\r\n\t\t\t\t\t\t\treturn \"Take the most interesting looking books for yourself.\"\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn <span className=\"locked\">Take the most interesting looking books for yourself.</span>\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 8.01:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\t\tcase 8.02:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\t\tcase 8.1:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\t\tcase 8.2:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\t\tcase 8.3:\r\n\t\t\t\t\treturn \"Continue.\"\r\n\t\t\t\tcase \"8fire\":\r\n\t\t\t\t\treturn \"Oh dear.\"\r\n\t\t\tcase 9:\r\n\t\t\t\tswitch(key) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tif (window.$motive === \"wealth\") {\r\n\t\t\t\t\t\t\treturn \"Attempt to open the chest. If there is treasure inside, it will be yours.\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.props.stats.stat.strength >= 10) {\r\n\t\t\t\t\t\t\t\treturn \"Attempt to open the chest with force. (Requires 10 Strength)\"\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn <span className=\"locked\">Attempt to open the chest with force. (Requires 10 Strength)</span>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (this.props.inventoryContents.find(item => item.id === 8)) {\r\n\t\t\t\t\t\t\treturn \"Attempt to open the chest using the Rusty Key. (Requires Rusty Key)\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn <span className=\"locked\">Attempt to open the chest using the Rusty Key. (Requires Rusty Key)</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\treturn \"Ignore the chest and continue through the dungeon.\"\r\n\t\t\t\t};\r\n\t\t\t\tcase 9.1:\r\n\t\t\t\t\treturn \"Defend yourself!\"\r\n\t\t\t\tcase 9.2:\r\n\t\t\t\t\treturn \"Defend yourself!\"\r\n\t\t\t\tcase 9.3:\r\n\t\t\t\t\treturn \"Defend yourself!\"\r\n\t\t\t\tcase \"9unlock\":\r\n\t\t\t\t\treturn \"Defend yourself!\"\r\n\t\t\t\tcase \"9loot\":\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase 9.4:\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\tcase 10:\r\n\t\t\t\tswitch(key) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn \"Carefully look over the edge of the chasm.\"\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\treturn \"Attempt to leap across the gap. (This could end badly for you)\"\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tif (this.props.stats.stat.dexterity >= 6) {\r\n\t\t\t\t\t\t\treturn \"Confidently leap across the gap. (Requires 6 Dexterity)\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn <span className=\"locked\">Confidently leap across the gap. (Requires 6 Dexterity)</span>\r\n\t\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\tcase 10.1:\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase \"10.2success\":\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase \"10.2damage\":\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase \"10.2death\":\r\n\t\t\t\t\treturn \"Oh dear...\"\r\n\t\t\t\tcase 10.3:\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase \"10levitate\":\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase 10.4:\r\n\t\t\t\t\tswitch(key) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\tif (this.props.inventoryContents.find(item => item.id === 10) || this.props.equippedItems.torso.id === 10) {\r\n\t\t\t\t\t\t\t\treturn \"Take the potion and continue.\"\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn \"Take the Chain Mail and continue.\"\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\tif (this.props.inventoryContents.find(item => item.id === 10) || this.props.equippedItems.torso.id === 10) {\r\n\t\t\t\t\t\t\t\treturn \"Continue without taking the potion.\"\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn \"Continue without taking the Chain Mail.\"\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t};\r\n\t\t\tcase 11:\r\n\t\t\t\tswitch(key) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn \"Attempt to blindly find a way out of this room.\"\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (this.props.inventoryContents.find(item => item.id === 4)) {\r\n\t\t\t\t\t\t\treturn \"Use your torch to light the way. (Requires Torch)\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn <span className=\"locked\">Use your torch to light the way. (Requires Torch)</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tcase \"11.1damage\":\r\n\t\t\t\t\treturn \"Try again.\"\r\n\t\t\t\tcase \"11.1success\":\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase 11.2:\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase \"11light\":\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase \"11fire\":\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase 11.4:\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\tcase 12:\r\n\t\t\t\tswitch(key) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"Oh dear, things have gone very wrong here. You shouldn't be seeing this at all!\"\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn \"Ask to hear the Sphinx's riddle.\"\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\treturn \"Attack the Sphinx. If there's going to be a fight, you may as well be the one starting it!\"\r\n\t\t\t\t};\r\n\t\t\t\tcase 12.1:\r\n\t\t\t\t\treturn \"Submit Answer\"\r\n\t\t\t\tcase 12.2:\r\n\t\t\t\t\treturn \"Receive your reward.\"\r\n\t\t\t\tcase 12.3:\r\n\t\t\t\t\treturn \"Defend yourself!\"\r\n\t\t\t\tcase \"12loot\":\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\tcase 12.4:\r\n\t\t\t\t\treturn \"Continue\"\r\n\t\t\t\t\t\r\n\t\t};\r\n\t};\r\n\t\r\n\tkeyCheck = (event) => {if (event.keyCode === 32) { //Confirm if the space bar is pressed for accessibility purposes.\r\n\t\tthis.actionClick(event);\r\n\t}};\r\n\t\r\n\tactionSelect() { //Render rows of actions based on the value of actionNum\r\n\t\tlet actions = [];\r\n\t\tif (this.props.inputRequired === true) {\r\n\t\t\tactions.push(<div className=\"itemsTitle\">Enter your answer:</div>);\r\n\t\t\tactions.push(<input className=\"input\" id=\"userInput\" data-value=\"input\" key=\"input\"></input>);\r\n\t\t};\r\n\t\tfor (let x = 0; x < this.props.actionNum; x++) {\r\n\t\t\tactions.push(<div className=\"action\" data-value={x} key={x} onClick={this.actionClick} onKeyDown={this.keyCheck} tabIndex=\"0\">{this.componentDidMount(x)}</div>);\r\n\t\t};\r\n\t\treturn actions;\r\n\t};\r\n\t\r\n\tactionClick = (event) => { //Set new value to render next screen.\r\n\t\tlet value = Number(event.target.dataset.value);\r\n\t\tswitch(this.props.value) {\r\n\t\t\tcase \"emptySpell\":\r\n\t\t\t\tv = window.$inventoryValueSnapshot;\r\n\t\t\t\ta = window.$inventoryActionSnapshot;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"spellScrollNoSpellbook\":\r\n\t\t\t\tv = \"inventory\";\r\n\t\t\t\ta = this.props.inventoryContents.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"spellScroll\":\r\n\t\t\t\tv = \"inventory\"\r\n\t\t\t\ta = this.props.inventoryContents.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"allSpells\":\r\n\t\t\t\tthis.props.statsHandler(0, 0, 1, 0);\r\n\t\t\t\tv = window.$spellPickerValueSnapshot;\r\n\t\t\t\ta = window.$spellPickerActionSnapshot;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 0:\r\n\t\t\t\tswitch(value) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tv = 1;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\twindow.$motive = \"wealth\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tv = 1;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\twindow.$motive = \"revenge\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tv = 1;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\twindow.$motive = \"curiosity\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tv = 2;\r\n\t\t\t\ta = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tswitch(value) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tv = 4;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tthis.props.inventoryHandler(1); //Sword\r\n\t\t\t\t\t\tthis.props.itemEquipHandler(Items.find((item) => item.id === 1));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1: \r\n\t\t\t\t\t\tv = 4;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tthis.props.inventoryHandler(2); //Bow\r\n\t\t\t\t\t\tthis.props.itemEquipHandler(Items.find((item) => item.id === 2));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2: \r\n\t\t\t\t\t\tv = 4;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tthis.props.inventoryHandler(3); //Spellbook\r\n\t\t\t\t\t\tthis.props.itemEquipHandler(Items.find((item) => item.id === 3));\r\n\t\t\t\t\t\tthis.props.spellbookUpdate(1);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tv = 5;\r\n\t\t\t\ta = 4;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tswitch(value) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tv = 6; //move on to the next scene and fight.\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (this.props.actionCases.case5[1] === true) {\r\n\t\t\t\t\t\t\tv = 5.1; //try and leave but find the door is sealed.\r\n\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\tthis.props.lock(5, 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tif (this.props.stats.stat.strength >= 3) {\r\n\t\t\t\t\t\t\tif (this.props.actionCases.case5[2] === true) {\r\n\t\t\t\t\t\t\t\tv = 5.2; //take a torch and add it to the inventory.\r\n\t\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\t\tthis.props.inventoryHandler(4);\r\n\t\t\t\t\t\t\t\tthis.props.lock(5, 2);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tif (this.props.stats.stat.intelligence >= 3) {\r\n\t\t\t\t\t\t\tif (this.props.actionCases.case5[3] === true) {\r\n\t\t\t\t\t\t\t\tv = 5.3; //examine the torches and discover magical fire.\r\n\t\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\t\tthis.props.lock(5, 3);\r\n\t\t\t\t\t\t\t\tItems[3].description = \"A flaming length of wood that provides light and magical, ever-burning fire.\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 5.1:\r\n\t\t\t\t\tswitch(value) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\tv = 5;\r\n\t\t\t\t\t\t\ta = 4;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 5.2:\r\n\t\t\t\t\tswitch(value) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\tv = 5;\r\n\t\t\t\t\t\t\ta = 4;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 5.3:\r\n\t\t\t\t\tswitch(value) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\tv = 5;\r\n\t\t\t\t\t\t\ta = 4;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 6: //Suddenly, Skeleton!\r\n\t\t\t\twindow.$combatValueSnapshot = \"6loot\";\r\n\t\t\t\tv = \"combat\";\r\n\t\t\t\tc = 1;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"6loot\": //Combat loot\r\n\t\t\t\t\tv = 6.1;\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\tc = \"\";\r\n\t\t\t\t\tthis.props.inventoryHandler(5); //Leather Helmet\r\n\t\t\t\t\tthis.props.itemEquipHandler(Items.find((item) => item.id === 5));\r\n\t\t\t\t\tif (this.props.inventoryContents.find(item => item.id === 4)) {\r\n\t\t\t\t\t\tthis.props.inventoryHandler(6); //Healing Potion\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 6.1:\r\n\t\t\t\t\tv = 7;\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t//Case 7 goes to default.\r\n\t\t\tcase 8:\r\n\t\t\t\tswitch(value) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.props.lock(8, 0);\r\n\t\t\t\t\t\tlet roll = RollD20();\r\n\t\t\t\t\t\tif (roll <= 10) {\r\n\t\t\t\t\t\t\tv = 8.01; //No damage\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv = 8.02 //Take damage\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (this.props.actionCases.case8[1] === true) {\r\n\t\t\t\t\t\t\tif (this.props.stats.stat.intelligence >= 6) {\r\n\t\t\t\t\t\t\t\tthis.props.lock(8, 1);\r\n\t\t\t\t\t\t\t\tv = 8.1;\r\n\t\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2: //Add spell to spellbook.\r\n\t\t\t\t\t\tif (this.props.actionCases.case8[2] === true) {\r\n\t\t\t\t\t\t\tif (this.props.equippedItems.weapon.id === 3 || this.props.inventoryContents.find(item => item.id === 3)) {\r\n\t\t\t\t\t\t\t\tif (this.props.spellbook.length === SpellList.length) { //This is done like this instead of the built in method of spellPicker because the state updates asynchronously and it prevents it from working correctly.\r\n\t\t\t\t\t\t\t\t\twindow.$spellPickerValueSnapshot = this.props.value;\r\n\t\t\t\t\t\t\t\t\twindow.$spellPickerActionSnapshot = this.props.actionNum;\r\n\t\t\t\t\t\t\t\t\tthis.props.lock(8, 2);\r\n\t\t\t\t\t\t\t\t\tv = \"allSpells\";\r\n\t\t\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.props.spellPickerHandler();\r\n\t\t\t\t\t\t\t\t\tthis.props.lock(8, 2);\r\n\t\t\t\t\t\t\t\t\tv = 8.2;\r\n\t\t\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3: //Collection of Books\r\n\t\t\t\t\t\tif (this.props.actionCases.case8[3] === true) {\r\n\t\t\t\t\t\t\tthis.props.lock(8, 3);\r\n\t\t\t\t\t\t\tthis.props.inventoryHandler(7); \r\n\t\t\t\t\t\t\tv = 8.3;\r\n\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 8.02:\r\n\t\t\t\t\tthis.props.hitPointsUpdate(-4);\r\n\t\t\t\t\tv = Chambers(this.props)[0];\r\n\t\t\t\t\ta = Chambers(this.props)[1];\r\n\t\t\t\t\tthis.props.spellCooldownUpdate();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 8.2:\r\n\t\t\t\t\tv = 8;\r\n\t\t\t\t\ta = window.$inventoryActionSnapshot;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 8.3:\r\n\t\t\t\t\tv = 8;\r\n\t\t\t\t\ta = window.$inventoryActionSnapshot;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"8fire\":\r\n\t\t\t\t\tthis.props.gameover();\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 9:\r\n\t\t\t\tswitch(value) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tif (window.$motive === \"wealth\") {\r\n\t\t\t\t\t\t\tv = 9.1;\r\n\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.props.stats.stat.strength >= 10) {\r\n\t\t\t\t\t\t\t\tv = 9.2;\r\n\t\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (this.props.inventoryContents.find(item => item.id === 8)) {\r\n\t\t\t\t\t\t\tv = 9.3;\r\n\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\tthis.props.inventoryRemove(8);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tv = Chambers(this.props)[0];\r\n\t\t\t\t\t\ta = Chambers(this.props)[1];\r\n\t\t\t\t\t\tthis.props.spellCooldownUpdate();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 9.1:\r\n\t\t\t\t\twindow.$combatValueSnapshot = \"9loot\"\r\n\t\t\t\t\tv = \"combat\";\r\n\t\t\t\t\tc = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 9.2:\r\n\t\t\t\t\twindow.$combatValueSnapshot = \"9loot\"\r\n\t\t\t\t\tv = \"combat\";\r\n\t\t\t\t\tc = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 9.3:\r\n\t\t\t\t\twindow.$combatValueSnapshot = \"9loot\"\r\n\t\t\t\t\tv = \"combat\";\r\n\t\t\t\t\tc = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"9unlock\":\r\n\t\t\t\t\twindow.$combatValueSnapshot = \"9loot\"\r\n\t\t\t\t\tv = \"combat\";\r\n\t\t\t\t\tc = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"9loot\": //Combat loot\r\n\t\t\t\t\tv = 9.4;\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\tc = \"\";\r\n\t\t\t\t\tthis.props.itemPickerHandler(2, 2);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//Case 9.4 goes to default.\r\n\t\t\tcase 10:\r\n\t\t\t\tswitch(value) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tv = 10.1;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tlet roll = RollD20();\r\n\t\t\t\t\t\tif (roll > 10) {\r\n\t\t\t\t\t\t\tv = \"10.2success\";\r\n\t\t\t\t\t\t} else if (roll > 3) {\r\n\t\t\t\t\t\t\tv = \"10.2damage\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv = \"10.2death\";\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tif (this.props.stats.stat.dexterity >= 6) {\r\n\t\t\t\t\t\t\tv = 10.3;\r\n\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 10.1:\r\n\t\t\t\t\tv = 10;\r\n\t\t\t\t\ta = 3;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"10.2success\":\r\n\t\t\t\t\tv = 10.4;\r\n\t\t\t\t\ta = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"10.2damage\":\r\n\t\t\t\t\tthis.props.hitPointsUpdate(-3);\r\n\t\t\t\t\tv = 10.4;\r\n\t\t\t\t\ta = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"10.2death\":\r\n\t\t\t\t\tthis.props.gameover()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 10.3:\r\n\t\t\t\t\tv = 10.4;\r\n\t\t\t\t\ta = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"10levitate\":\r\n\t\t\t\t\tv = 10.4;\r\n\t\t\t\t\ta = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 10.4:\r\n\t\t\t\t\tswitch(value) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\tthis.props.inventoryContents.find(item => item.id === 10) || this.props.equippedItems.torso.id === 10 ? this.props.inventoryHandler(6) : this.props.inventoryHandler(10); //Chain Mail\r\n\t\t\t\t\t\t\tv = Chambers(this.props)[0];\r\n\t\t\t\t\t\t\ta = Chambers(this.props)[1];\r\n\t\t\t\t\t\t\tthis.props.spellCooldownUpdate();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\tv = Chambers(this.props)[0];\r\n\t\t\t\t\t\t\ta = Chambers(this.props)[1];\r\n\t\t\t\t\t\t\tthis.props.spellCooldownUpdate();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 11:\r\n\t\t\t\tswitch(value) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tif (RollD10() < 4) {\r\n\t\t\t\t\t\t\tv = \"11.1success\";\r\n\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.props.hitPointsUpdate(-2);\r\n\t\t\t\t\t\t\tv = \"11.1damage\";\r\n\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tif (this.props.inventoryContents.find(item => item.id === 4)) {\r\n\t\t\t\t\t\t\tv = 11.2;\r\n\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\tcase \"11light\":\r\n\t\t\t\t\t\tv = 11.3\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"11.1damage\":\r\n\t\t\t\t\tv = 11;\r\n\t\t\t\t\ta = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"11.1success\":\r\n\t\t\t\t\tthis.props.statsHandler(0, 2, 0, 0);\r\n\t\t\t\t\tv = 11.4;\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 11.2:\r\n\t\t\t\t\tthis.props.statsHandler(0, 2, 0, 0);\r\n\t\t\t\t\tv = 11.4;\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"11light\":\r\n\t\t\t\t\tthis.props.statsHandler(0, 2, 0, 0);\r\n\t\t\t\t\tv = 11.4;\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"11fire\":\r\n\t\t\t\t\tv = 11;\r\n\t\t\t\t\ta = 2;\r\n\t\t\t\t\tbreak\r\n\t\t\t\t//case 11.4 goes to default.\r\n\t\t\tcase 12:\r\n\t\t\t\tswitch(value) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.props.requireInput(true);\r\n\t\t\t\t\t\tv = 12.1;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\twindow.$combatValueSnapshot = \"12loot\"\r\n\t\t\t\t\t\tv = \"combat\";\r\n\t\t\t\t\t\tc = 3;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 12.1:\r\n\t\t\t\t\tlet answer = document.getElementById(\"userInput\").value.toLowerCase();\r\n\t\t\t\t\tlet answers = [\"clock\", \"a clock\", \"watch\", \"a watch\", \"timepiece\", \"a timepiece\", \"time piece\", \"a time piece\"];\r\n\t\t\t\t\tif (answers.includes(answer)) {\r\n\t\t\t\t\t\tthis.props.requireInput(false);\r\n\t\t\t\t\t\tv = 12.2;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.requireInput(false);\r\n\t\t\t\t\t\tv = 12.3;\r\n\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\tcase 12.2:\r\n\t\t\t\t\tthis.props.hitPointsMaxHandler(5);\r\n\t\t\t\t\tthis.props.itemPickerHandler(3, 2);\r\n\t\t\t\t\tthis.props.lock(12, 0);\r\n\t\t\t\t\tv = 12.4;\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 12.3:\r\n\t\t\t\t\twindow.$combatValueSnapshot = \"12loot\"\r\n\t\t\t\t\tv = \"combat\";\r\n\t\t\t\t\tc = 3;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"12loot\":\r\n\t\t\t\t\tthis.props.itemPickerHandler(3, 2);\r\n\t\t\t\t\tv = 12.4;\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\tbreak;\t\t\r\n\t\t\t\t//case 12.4 goes to default.\r\n\t\t\tdefault:\r\n\t\t\t\tv = Chambers(this.props)[0];\r\n\t\t\t\ta = Chambers(this.props)[1];\r\n\t\t\t\tthis.props.spellCooldownUpdate();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.props.mainHandler(v, a); //v is the value to be passed back to main.js to change state. a is the number of actions to be shown.\r\n\t\tthis.props.enemyNumberUpdate(c);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn <div className=\"actions\">{this.actionSelect()}</div>\r\n\t}\r\n}\r\n\r\nexport default Actions;","function RollD4(min, max) {\r\n\tmin = Math.ceil(1);\r\n\tmax = Math.floor(4);\r\n\tlet result = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\treturn result;\r\n}\r\n\r\nexport default RollD4;","function RollD6(min, max) {\r\n\tmin = Math.ceil(1);\r\n\tmax = Math.floor(6);\r\n\tlet result = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\treturn result;\r\n}\r\n\r\nexport default RollD6;","function RollD8(min, max) {\r\n\tmin = Math.ceil(1);\r\n\tmax = Math.floor(8);\r\n\tlet result = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\treturn result;\r\n}\r\n\r\nexport default RollD8;","function RollD12(min, max) {\r\n\tmin = Math.ceil(1);\r\n\tmax = Math.floor(12);\r\n\tlet result = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\treturn result;\r\n}\r\n\r\nexport default RollD12;","import React from 'react';\r\nimport RollD4 from './Dice/d4.js';\r\nimport RollD6 from './Dice/d6.js';\r\nimport RollD8 from './Dice/d8.js';\r\nimport RollD10 from './Dice/d10.js';\r\nimport RollD12 from './Dice/d12.js';\r\nimport RollD20 from './Dice/d20.js';\r\nimport SpellList from './spellList.js';\r\n\r\nfunction ItemInfo(props) {\r\n\tconst dismiss = () => props.dismiss();\r\n\tconst focus = () => props.focus();\r\n\t\r\n\tfunction itemBonus() { //Calculates stat bonus to display for weapon damage and adds magical bonus damage.\r\n\t\tswitch(props.showItemInfo.stat) {\r\n\t\tcase \"strength\":\r\n\t\t\treturn Math.floor(props.stats.stat.strength / 4) + props.showItemInfo.bonus;\r\n\t\tcase \"dexterity\":\r\n\t\t\treturn Math.floor(props.stats.stat.dexterity / 4) + props.showItemInfo.bonus;\r\n\t\tcase \"intelligence\":\r\n\t\t\treturn Math.floor(props.stats.stat.intelligence / 4) + props.showItemInfo.bonus;\r\n\t\tcase \"vitality\":\r\n\t\t\treturn Math.floor(props.stats.stat.vitality / 2) + props.showItemInfo.bonus;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t};\r\n\t};\r\n\t\r\n\tconst itemEquip = (event) => { //Equips item.\r\n\t\tlet inventoryContents = props.inventoryContents.slice();\r\n\t\tlet itemName = event.target.parentElement.firstChild.innerText;\r\n\t\tlet item = inventoryContents.find((item) => item.name === itemName);\r\n\t\tprops.itemEquipHandler(item);\r\n\t\tdismiss();\r\n\t};\r\n\t\r\n\tconst itemUse = (event) => { //Uses item.\r\n\t\tlet inventoryContents = props.inventoryContents.slice();\r\n\t\tlet itemName = event.target.parentElement.firstChild.innerText;\r\n\t\tlet item = inventoryContents.find((item) => item.name === itemName);\r\n\t\tif (item.hasOwnProperty(\"healing\")) { //Healing Potions\r\n\t\t\tif (props.hitPoints < props.maxHitPoints) {\r\n\t\t\t\tconst healing = (roll, multiplier) => {\r\n\t\t\t\t\tlet result = 0;\r\n\t\t\t\t\tswitch(roll) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"d4\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD4();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + Math.floor(props.stats.stat.vitality / 2);\r\n\t\t\t\t\t\tcase \"d6\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD6();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + Math.floor(props.stats.stat.vitality / 2);\r\n\t\t\t\t\t\tcase \"d8\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD8();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + Math.floor(props.stats.stat.vitality / 2);\r\n\t\t\t\t\t\tcase \"d10\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD10();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + Math.floor(props.stats.stat.vitality / 2);\r\n\t\t\t\t\t\tcase \"d12\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD12();;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + Math.floor(props.stats.stat.vitality / 2);\r\n\t\t\t\t\t\tcase \"d20\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD20();;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + Math.floor(props.stats.stat.vitality / 2);\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\tconst heal = healing(item.healing.substring(item.healing.length, item.healing.indexOf('d')), item.healing.substring(0, item.healing.indexOf('d')));\r\n\t\t\t\tprops.hitPointsUpdate(heal);\r\n\t\t\t\tprops.inventoryRemove(item.id);\r\n\t\t\t};\r\n\t\t} else if (item.id === 9) { //Spell Scrolls\r\n\t\t\tif (props.equippedItems.weapon.id === 3 || props.inventoryContents.find(item => item.id === 3)) {\r\n\t\t\t\tif (props.spellbook.length !== SpellList.length) {\r\n\t\t\t\t\tprops.spellPickerHandler();\r\n\t\t\t\t\tprops.mainHandler(\"spellScroll\", 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.$spellPickerValueSnapshot = props.value;\r\n\t\t\t\t\tprops.mainHandler(\"allSpells\", 1);\r\n\t\t\t\t};\r\n\t\t\t\tprops.inventoryRemove(item.id);\r\n\t\t\t} else {\r\n\t\t\t\tprops.mainHandler(\"spellScrollNoSpellbook\", 1);\r\n\t\t\t};\r\n\t\t};\r\n\t\tif (props.value === \"combat\") {\r\n\t\t\tprops.combatItemHandler(false);\r\n\t\t\tprops.combatLock(true);\r\n\t\t};\r\n\t\tdismiss();\r\n\t};\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tdocument.getElementsByClassName(\"itemInfo\")[0].focus();\r\n\t});\r\n\treturn <span className=\"itemInfo\" tabIndex=\"0\" onBlur={() => {dismiss()}}>\r\n\t\t<h3>{props.showItemInfo.name}</h3>\r\n\t\t<p>{props.showItemInfo.description}</p>\r\n\t\t{props.showItemInfo.damage &&\r\n\t\t\t<p className=\"bold\">Damage: {props.showItemInfo.damage.substring(0, props.showItemInfo.damage.indexOf('d'))}-{Number(props.showItemInfo.damage.substring(0, props.showItemInfo.damage.indexOf('d')) * props.showItemInfo.damage.substring(props.showItemInfo.damage.length, props.showItemInfo.damage.indexOf('d')+1))} + {itemBonus()}</p>\r\n\t\t}\r\n\t\t{props.showItemInfo.armour &&\r\n\t\t\t<p className=\"bold\">Armour: {props.showItemInfo.armour}</p>\r\n\t\t}\r\n\t\t{props.showItemInfo.healing &&\r\n\t\t\t<p className=\"bold\">Heals {props.showItemInfo.healing.substring(0, props.showItemInfo.healing.indexOf('d'))}-{Number(props.showItemInfo.healing.substring(0, props.showItemInfo.healing.indexOf('d')) * props.showItemInfo.healing.substring(props.showItemInfo.healing.length, props.showItemInfo.healing.indexOf('d')+1))} + {itemBonus()}</p>\r\n\t\t}\r\n\t\t{props.showItemInfo.equipable === true ?\r\n\t\t\tprops.showItemInfo.id !== props.equippedItems.weapon.id ?\r\n\t\t\t\tprops.showItemInfo.hasOwnProperty(\"level\") ?\r\n\t\t\t\t\tprops.stats.stat[props.showItemInfo.stat] >= props.showItemInfo.level ?\r\n\t\t\t\t\t\t<input type=\"button\" className=\"itemEquipButton\" value=\"Equip\" onFocus={() => {focus()}} onClick={(event) => {itemEquip(event)}}></input>\r\n\t\t\t\t\t: <p className=\"bold\">Requires {props.showItemInfo.level} {props.showItemInfo.stat} to equip.</p>\r\n\t\t\t\t: <input type=\"button\" className=\"itemEquipButton\" value=\"Equip\" onFocus={() => {focus()}} onClick={(event) => {itemEquip(event)}}></input>\r\n\t\t\t: null\r\n\t\t: null\r\n\t\t}\r\n\t\t{props.showItemInfo.useable === true &&\r\n\t\t\t<input type=\"button\" className=\"itemUseButton\" value=\"Use\" onFocus={() => {focus()}} onClick={(event) => {itemUse(event)}}></input>\r\n\t\t}\r\n\t</span>\r\n}\r\n\r\nexport default ItemInfo;","import React from 'react';\r\nimport ItemInfo from './itemInfo.js';\r\n\r\nlet inventoryNames;\r\nlet buttonPos;\r\nlet weapons;\r\nlet useableItems;\r\nclass Items extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {showItemInfo: false};\r\n\t\tthis.timeOutId = null;\r\n\t}\r\n\t\r\n\tcomponentDidMount(key) { //Add the names of items to each rendered item button.\r\n\t\tconst inventoryPrint = () => {\r\n\t\t\tlet inventoryContents = this.props.inventoryContents.slice();\r\n\t\t\tinventoryNames = inventoryContents.map(item => item.name);\r\n\t\t};\r\n\t\tinventoryPrint();\r\n\t\tswitch(key) {\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"There should be an item here.\"\r\n\t\t\tcase key:\r\n\t\t\t\treturn inventoryNames[key];\r\n\t\t};\r\n\t};\r\n\t\r\n\tcomponentDidUpdate() { //Position the itemInfo component based on the button position from itemClick. (Not perfectly centered but correct about 99% of the time I think, as good as can be.)\r\n\t\tif (this.state.showItemInfo) {\r\n\t\t\tconst infoPosition = () => {\r\n\t\t\t\tdocument.getElementsByClassName(\"itemInfo\")[0].style.left = (buttonPos.left + buttonPos.width + 20) + \"px\";\r\n\t\t\t\tdocument.getElementsByClassName(\"itemInfo\")[0].style.top = (buttonPos.top - (document.getElementsByClassName(\"itemInfo\")[0].getBoundingClientRect().height / 3)) + \"px\";\r\n\t\t\t};\r\n\t\t\tinfoPosition();\r\n\t\t};\r\n\t};\r\n\t\r\n\tcomponentWillUnmount() { //Stop extra stuff happening on the itemInfo component when it's already unmounted (optimization!).\r\n\t\tthis.setState({showItemInfo: false});\r\n\t\tclearTimeout(this.timeOutId);\r\n\t}\r\n\t\r\n\titemSelect() { //Render rows of items based on the value of inventoryContents prop.\r\n\t\tlet items = [];\r\n\t\tif (this.props.value !== \"combat\") {\r\n\t\t\tfor (let x = 0; x < this.props.inventoryContents.length; x++) {\r\n\t\t\t\titems.push(<div className=\"item\" data-value={x} key={x} onClick={this.itemClick} onKeyDown={this.keyCheck} tabIndex=\"0\">{this.componentDidMount(x)}</div>)\r\n\t\t\t};\r\n\t\t} else { //Render weapon swaps and items to use in combat.\r\n\t\t\tif (this.props.weaponSwap) { //Weapons\r\n\t\t\t\tlet inventoryContents = this.props.inventoryContents.slice();\r\n\t\t\t\tweapons = inventoryContents.filter(item => item.equipSlot === \"weapon\");\r\n\t\t\t\titems.push(<div className=\"weapon\" id=\"combatChangeWeaponCurrent\" data-value={this.props.equippedItems.weapon.id} key={this.props.equippedItems.weapon.name} onClick={this.itemClick} onKeyDown={this.keyCheck} tabIndex=\"0\">{this.props.equippedItems.weapon.name} (Equipped)</div>)\r\n\t\t\t\tfor (let x = 0; x < weapons.length; x++) {\r\n\t\t\t\t\titems.push(<div className=\"weapon\" id=\"combatChangeWeaponSelect\" data-value={x} key={weapons[x].name} onClick={this.itemClick} onKeyDown={this.keyCheck} tabIndex=\"0\">{weapons[x].name}</div>)\r\n\t\t\t\t};\r\n\t\t\t\titems.push(<div className=\"action\" id=\"combatKeepWeapon\" key=\"keepWeapon\" onClick={this.keepWeapon} onKeyDown={this.keyCheck} tabIndex=\"0\">Cancel</div>);\r\n\t\t\t} else if (this.props.combatItem) { //Useable items\r\n\t\t\t\tlet inventoryContents = this.props.inventoryContents.slice();\r\n\t\t\t\tuseableItems = inventoryContents.filter(item => item.useable === true && item.id !== 9);\r\n\t\t\t\tfor (let x = 0; x < useableItems.length; x++) {\r\n\t\t\t\t\titems.push(<div className=\"item\" id=\"combatUseItemSelect\" data-value={x} key={useableItems[x].name + x} onClick={this.itemClick} onKeyDown={this.keyCheck} tabIndex=\"0\">{useableItems[x].name}</div>)\r\n\t\t\t\t};\r\n\t\t\t\titems.push(<div className=\"action\" id=\"combatCancelItems\" key=\"cancelItems\" onClick={this.cancelItems} onKeyDown={this.keyCheck} tabIndex=\"0\">Cancel</div>);\r\n\t\t\t};\r\n\t\t};\r\n\t\treturn items;\r\n\t};\r\n\t\r\n\tkeyCheck = (event) => {if (event.keyCode === 32) { //Confirm if the space bar is pressed for accessibility purposes.\r\n\t\tswitch(event.target.id) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatChangeWeaponSelect\":\r\n\t\t\t\tthis.itemClick(event);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatChangeWeaponCurrent\":\r\n\t\t\t\tthis.itemClick(event);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatKeepWeapon\":\r\n\t\t\t\tthis.keepWeapon();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatUseItemSelect\":\r\n\t\t\t\tthis.itemClick(event);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatUseItem\":\r\n\t\t\t\tthis.cancelItems();\r\n\t\t\t\tbreak;\r\n\t\t};\r\n\t}};\r\n\t\r\n\tkeepWeapon = () => { //Unmounts above weapons filter and keeps current.\r\n\t\tthis.props.weaponSwapHandler(false);\r\n\t};\r\n\t\r\n\tcancelItems = () => {\r\n\t\tthis.props.combatItemHandler(false); //Unmounts useable items.\r\n\t};\r\n\t\r\n\titemClick = (event) => { //Show the itemInfo component and get the position of the button.\r\n\t\tif (this.props.value !== \"combat\") {\r\n\t\t\tif (this.state.showItemInfo === false) {\r\n\t\t\t\tlet item = this.props.inventoryContents[event.target.dataset.value];\r\n\t\t\t\tbuttonPos = event.target.getBoundingClientRect();\r\n\t\t\t\tthis.setState({showItemInfo: item});\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tif (this.state.showItemInfo === false) {\r\n\t\t\t\tif (this.props.weaponSwap) {\r\n\t\t\t\t\tif (event.target.id === \"combatChangeWeaponCurrent\") {\r\n\t\t\t\t\t\tlet item = this.props.equippedItems.weapon;\r\n\t\t\t\t\t\tbuttonPos = event.target.getBoundingClientRect();\r\n\t\t\t\t\t\tthis.setState({showItemInfo: item});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet item = weapons[event.target.dataset.value];\r\n\t\t\t\t\t\tbuttonPos = event.target.getBoundingClientRect();\r\n\t\t\t\t\t\tthis.setState({showItemInfo: item});\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (this.props.combatItem) { //Relocate healing indicator.\r\n\t\t\t\t\tlet item = useableItems[event.target.dataset.value];\r\n\t\t\t\t\tbuttonPos = event.target.getBoundingClientRect();\r\n\t\t\t\t\tthis.setState({showItemInfo: item})\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\t\r\n\thandleTooltipDismiss = () => { //Dismiss the itemInfo component.\r\n\t\tthis.timeOutId = setTimeout(() => {\r\n\t\t\tthis.setState({showItemInfo: false});\r\n\t\t});\r\n\t};\r\n\t\r\n\thandleTooltipFocus = () => { //Cancel the above function when the component is focused.\r\n\t\tclearTimeout(this.timeOutId);\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn <div id=\"itemContainer\">\r\n\t\t\t{this.props.value !== \"combat\" ? \r\n\t\t\t\t<p className=\"itemsTitle\">Items</p>\r\n\t\t\t:\r\n\t\t\t\t<p className=\"combatItemsTitle\">You may use one item or change one weapon per turn, in addition to attacking.</p>\r\n\t\t\t}\r\n\t\t\t<div className=\"itemContainerOverflow\">\r\n\t\t\t\t{this.itemSelect()}\r\n\t\t\t</div>\r\n\t\t\t{this.state.showItemInfo ? <ItemInfo {...this.props} {...this.state} dismiss={this.handleTooltipDismiss} focus={this.handleTooltipFocus}/> : null}\r\n\t\t</div>\r\n\t};\r\n};\r\n\t\t\r\nexport default Items","import React from 'react';\r\nimport RollD4 from './Dice/d4.js';\r\nimport RollD6 from './Dice/d6.js';\r\nimport RollD8 from './Dice/d8.js';\r\nimport RollD10 from './Dice/d10.js';\r\nimport RollD12 from './Dice/d12.js';\r\nimport RollD20 from './Dice/d20.js';\r\n\r\nfunction SpellInfo(props) {\r\n\tconst dismiss = () => props.dismiss();\r\n\tconst focus = () => props.focus();\r\n\tconst spell = props.showSpellInfo;\r\n\tconst statBonus = Math.floor(props.stats.stat.intelligence / 4);\r\n\t\r\n\tconst bonus = () => { //Calculates the damage or healing bonus to spells.\r\n\t\tlet equipment = props.equippedItems;\r\n\t\tlet equipmentBonus = [];\r\n\t\tlet intBonus = Math.floor(props.stats.stat.intelligence / 4);\r\n\t\tlet totalBonus;\r\n\t\tfor (let x in equipment) {\r\n\t\t\tif (equipment[x].hasOwnProperty(\"magicBonus\")) {\r\n\t\t\t\tequipmentBonus.push(equipment[x].magicBonus);\r\n\t\t\t\ttotalBonus = equipmentBonus.reduce((a, b) => a + b);\r\n\t\t\t};\r\n\t\t};\r\n\t\tif (totalBonus === undefined) {\r\n\t\t\ttotalBonus = 0;\r\n\t\t};\r\n\t\treturn intBonus += totalBonus;\r\n\t};\r\n\t\r\n\tconst spellCast = () => {\r\n\t\tconst location = window.$inventoryValueSnapshot;\r\n\t\tif (props.value !== \"combat\") { //Non-combat\r\n\t\t\tswitch(spell.id) {\r\n\t\t\t\tcase 1: //Firebolt\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"emptySpell\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 8:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"8fire\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 11:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"11fire\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2: //Unlock\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"emptySpell\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 9:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"9unlock\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3: //Light\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"emptySpell\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 11:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"11light\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4: //Heal\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tif (props.hitPoints < props.maxHitPoints) {\r\n\t\t\t\t\t\t\t\tif (props.spellCooldown.heal === 0) {\r\n\t\t\t\t\t\t\t\tlet healing = 0;\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < 2; n++) {\r\n\t\t\t\t\t\t\t\t\thealing += RollD4();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\thealing += bonus();\r\n\t\t\t\t\t\t\t\tprops.hitPointsUpdate(healing);\r\n\t\t\t\t\t\t\t\tprops.spellCooldownSet(4);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 5: //Shield\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"emptySpell\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 6: //Levitate\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"emptySpell\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 10:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"10levitate\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 7: //Lightning Bolt\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"emptySpell\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 8: //Fireball\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"emptySpell\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 8:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"8fire\", 1);\r\n\t\t\t\t\t\t\tprops.spellCooldownSet(8);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 11:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"11fire\", 1);\r\n\t\t\t\t\t\t\tprops.spellCooldownSet(8);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 9: //Rejuvenate\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tif (props.hitPoints < props.maxHitPoints) {\r\n\t\t\t\t\t\t\t\tif (props.spellCooldown.rejuvenate === 0) {\r\n\t\t\t\t\t\t\t\tlet healing = 0;\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < 4; n++) {\r\n\t\t\t\t\t\t\t\t\thealing += RollD4();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\thealing += bonus();\r\n\t\t\t\t\t\t\t\tprops.hitPointsUpdate(healing);\r\n\t\t\t\t\t\t\t\tprops.spellCooldownSet(9);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 10: //Blade Storm\r\n\t\t\t\t\tswitch(location) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tprops.mainHandler(\"emptySpell\", 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.previousSpellUpdate(spell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.log(\"No Spell ID found\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t};\r\n\t\t} else { //Combat\r\n\t\t\tif (props.showSpellInfo.damage) {\r\n\t\t\t\tfunction spellAttack() { //Calculates damage from player spell attacks.\r\n\t\t\t\t\tconst damage = (roll, multiplier) => {\r\n\t\t\t\t\t\tlet result = 0;\r\n\t\t\t\t\t\tswitch(roll) {\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"d4\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD4();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\tcase \"d6\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD6();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\tcase \"d8\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD8();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\tcase \"d10\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD10();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\tcase \"d12\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD12();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\tcase \"d20\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD20();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst spellDamage = damage(spell.damage.substring(spell.damage.length, spell.damage.indexOf('d')), spell.damage.substring(0, spell.damage.indexOf('d')));\r\n\t\t\t\t\tprops.enemyHitPointsUpdate(spellDamage);\r\n\t\t\t\t\tif (spell.hasOwnProperty(\"cooldown\")) {\r\n\t\t\t\t\t\tprops.spellCooldownSet(spell.id);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tprops.damageDisplay(spellDamage);\r\n\t\t\t\t\tprops.damageBreakdown((spellDamage - bonus()), statBonus, bonus() - statBonus);\r\n\t\t\t\t\tprops.turnOrder();\r\n\t\t\t\t};\r\n\t\t\t\tspellAttack();\r\n\t\t\t\tprops.previousSpellHandler(spell);\r\n\t\t\t\tprops.combatSpellHandler(false);\r\n\t\t\t} else if (props.showSpellInfo.healing) { //Calculates healing from healing spells.\r\n\t\t\t\tif (props.spellCooldown[spell.name.toLowerCase()] === 0) {\r\n\t\t\t\t\tif (props.hitPoints < props.maxHitPoints) {\r\n\t\t\t\t\t\tconst healing = (roll, multiplier) => {\r\n\t\t\t\t\t\t\tlet result = 0;\r\n\t\t\t\t\t\t\tswitch(roll) {\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"d4\":\r\n\t\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\t\tresult += RollD4();\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\t\tcase \"d6\":\r\n\t\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\t\tresult += RollD6();\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\t\tcase \"d8\":\r\n\t\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\t\tresult += RollD8();\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\t\tcase \"d10\":\r\n\t\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\t\tresult += RollD10();\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\t\tcase \"d12\":\r\n\t\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\t\tresult += RollD12();;\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\t\tcase \"d20\":\r\n\t\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\t\tresult += RollD20();;\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn result + bonus();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tconst heal = healing(spell.healing.substring(spell.healing.length, spell.healing.indexOf('d')), spell.healing.substring(0, spell.healing.indexOf('d')));\r\n\t\t\t\t\t\tprops.hitPointsUpdate(heal);\r\n\t\t\t\t\t\tprops.spellCooldownSet(spell.id);\r\n\t\t\t\t\t\tprops.healingDisplay(heal);\r\n\t\t\t\t\t\tprops.turnOrder();\r\n\t\t\t\t\t\tprops.previousSpellHandler(spell);\r\n\t\t\t\t\t\tprops.combatSpellHandler(false);\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t} else if (props.showSpellInfo.id === 5) { //Shield\r\n\t\t\t\tprops.armourBonusUpdate(3);\r\n\t\t\t\tprops.spellDurationSet(5);\r\n\t\t\t\tprops.turnOrder();\r\n\t\t\t\tprops.previousSpellHandler(spell);\r\n\t\t\t\tprops.combatSpellHandler(false);\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tdocument.getElementsByClassName(\"spellInfo\")[0].focus();\r\n\t});\r\n\treturn <span className=\"spellInfo\" tabIndex=\"0\" onBlur={() => {dismiss()}}>\r\n\t\t<h3>{props.showSpellInfo.name}</h3>\r\n\t\t<p>{props.showSpellInfo.description}</p>\r\n\t\t{props.showSpellInfo.damage ?\r\n\t\t\tprops.stats.stat.intelligence >= props.showSpellInfo.level ?\r\n\t\t\t\tprops.showSpellInfo.hasOwnProperty(\"cooldown\") ?\r\n\t\t\t\t\tprops.spellCooldown[spell.name.toLowerCase()] === 0 ?\r\n\t\t\t\t\t\t<p className=\"bold\">Damage: {props.showSpellInfo.damage.substring(0, props.showSpellInfo.damage.indexOf('d'))}-{Number(props.showSpellInfo.damage.substring(0, props.showSpellInfo.damage.indexOf('d')) * props.showSpellInfo.damage.substring(props.showSpellInfo.damage.length, props.showSpellInfo.damage.indexOf('d')+1))} + {bonus()}</p>\r\n\t\t\t\t\t: <p className=\"bold\">Cooldown: {props.spellCooldown[spell.name.toLowerCase()]}</p>\r\n\t\t\t\t: <p className=\"bold\">Damage: {props.showSpellInfo.damage.substring(0, props.showSpellInfo.damage.indexOf('d'))}-{Number(props.showSpellInfo.damage.substring(0, props.showSpellInfo.damage.indexOf('d')) * props.showSpellInfo.damage.substring(props.showSpellInfo.damage.length, props.showSpellInfo.damage.indexOf('d')+1))} + {bonus()}</p>\r\n\t\t\t: <p className=\"bold\">Intelligence required: {props.showSpellInfo.level}</p>\r\n\t\t: null}\r\n\t\t{props.showSpellInfo.healing ? \r\n\t\t\tprops.stats.stat.intelligence >= props.showSpellInfo.level ?\r\n\t\t\t\tprops.spellCooldown[spell.name.toLowerCase()] === 0 ?\r\n\t\t\t\t\t<p className=\"bold\">Heals: {props.showSpellInfo.healing.substring(0, props.showSpellInfo.healing.indexOf('d'))}-{Number(props.showSpellInfo.healing.substring(0, props.showSpellInfo.healing.indexOf('d')) * props.showSpellInfo.healing.substring(props.showSpellInfo.healing.length, props.showSpellInfo.healing.indexOf('d')+1))} + {bonus()}</p> \r\n\t\t\t\t: <p className=\"bold\">Cooldown: {props.spellCooldown[spell.name.toLowerCase()]}</p>\r\n\t\t\t: <p className=\"bold\">Intelligence required: {props.showSpellInfo.level}</p>\r\n\t\t: null}\r\n\t\t{props.stats.stat.intelligence >= props.showSpellInfo.level ?\r\n\t\t\tprops.spellCooldown[spell.name.toLowerCase()] > 0 ?\r\n\t\t\t\t<input type=\"button\" className=\"spellCastButton locked\" value=\"Cast\" onFocus={() => {focus()}}></input>\r\n\t\t\t: <input type=\"button\" className=\"spellCastButton\" value=\"Cast\" onFocus={() => {focus()}} onClick={() => {spellCast()}}></input>\r\n\t\t: <input type=\"button\" className=\"spellCastButton locked\" value=\"Cast\" onFocus={() => {focus()}}></input>}\r\n\t</span>\r\n}\r\nexport default SpellInfo;","import React from 'react';\r\nimport SpellInfo from './spellInfo.js';\r\n\r\nlet spellNames;\r\nlet buttonPos;\r\nlet combatSpells;\r\nclass Spells extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {showSpellInfo: false};\r\n\t\tthis.timeOutId = null;\r\n\t}\r\n\t\r\n\tcomponentDidMount(key) { //Add the names of spells to each rendered spell button.\r\n\t\tconst spellPrint = () => {\r\n\t\t\tif (this.props.value !== \"combat\") {\r\n\t\t\t\tlet spellbookContents = this.props.spellbook.slice();\r\n\t\t\t\tspellNames = spellbookContents.map(spell => spell.name);\r\n\t\t\t} else {\r\n\t\t\t\tlet spellbookContents = combatSpells.slice();\r\n\t\t\t\tspellNames = spellbookContents.map(spell => spell.name);\r\n\t\t\t}\r\n\t\t};\r\n\t\tspellPrint();\r\n\t\tswitch(key) {\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"Alas, it appears that you have misplaced one of your spells.\"\r\n\t\t\tcase key:\r\n\t\t\t\treturn spellNames[key];\r\n\t\t};\r\n\t};\r\n\t\r\n\tcomponentDidUpdate() { //Position the spellInfo component based on the button position from spellClick.\r\n\t\tif (this.state.showSpellInfo) {\r\n\t\t\tconst infoPosition = () => {\r\n\t\t\t\tdocument.getElementsByClassName(\"spellInfo\")[0].style.left = (buttonPos.left + buttonPos.width + 20) + \"px\";\r\n\t\t\t\tdocument.getElementsByClassName(\"spellInfo\")[0].style.top = (buttonPos.top - (document.getElementsByClassName(\"spellInfo\")[0].getBoundingClientRect().height / 2.6)) + \"px\";\r\n\t\t\t};\r\n\t\t\tinfoPosition();\r\n\t\t};\r\n\t};\r\n\t\r\n\tcomponentWillUnmount() { //Stop extra stuff happening on the spellInfo when it's already unmounted (optimization!).\r\n\t\tthis.setState({showSpellInfo: false});\r\n\t\tclearTimeout(this.timeOutId);\r\n\t};\r\n\t\r\n\tspellSelect = () => { //Render rows of spells based on the value of spellbook prop.\r\n\t\tlet spells = [];\r\n\t\tif (this.props.spellbook.length === 0) {\r\n\t\t\tspells.push(<p key=\"noSpell\">You have no spells in your Spellbook. Keep an eye out for magical scrolls in your journey!</p>);\r\n\t\t} else {\r\n\t\t\tif (this.props.value !== \"combat\") {\r\n\t\t\t\tfor (let x = 0; x < this.props.spellbook.length; x++) {\r\n\t\t\t\t\tspells.push(<div className=\"spell\" data-value={x} key={x} onClick={this.spellClick} onKeyDown={this.keyCheck} tabIndex=\"0\">{this.componentDidMount(x)}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tcombatSpells = this.props.spellbook.filter(spell => spell.canBeUsedInCombat === true);\r\n\t\t\t\tfor (let x = 0; x < combatSpells.length; x++) {\r\n\t\t\t\t\tspells.push(<div className=\"spell\" data-value={x} key={x} onClick={this.spellClick} onKeyDown={this.keyCheck} tabIndex=\"0\">{this.componentDidMount(x)}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t};\r\n\t\t\t\tspells.push(<div className=\"action\" id=\"combatCancelSpell\" key=\"cancelSpell\" onClick={this.cancelSpell} onKeyDown={this.keyCheckCancel} tabIndex=\"0\">Cancel</div>)\r\n\t\t\t};\r\n\t\t};\r\n\t\treturn spells;\r\n\t};\r\n\t\r\n\tkeyCheck = (event) => {if (event.keyCode === 32) { //Confirm if the space bar is pressed for accessibility purposes.\r\n\t\tthis.spellClick(event);\r\n\t}};\r\n\t\r\n\tkeyCheckCancel = (event) => {if (event.keyCode === 32) {\r\n\t\tthis.cancelSpell();\r\n\t}};\r\n\t\r\n\tspellClick = (event) => { //Show the spellInfo component and get the position of the button.\r\n\t\tif (this.state.showSpellInfo === false) {\r\n\t\t\tif (this.props.value !== \"combat\") {\r\n\t\t\t\tlet spell = this.props.spellbook[event.target.dataset.value];\r\n\t\t\t\tbuttonPos = event.target.getBoundingClientRect();\r\n\t\t\t\tthis.setState({showSpellInfo: spell});\r\n\t\t\t} else {\r\n\t\t\t\tlet spell = combatSpells[event.target.dataset.value];\r\n\t\t\t\tbuttonPos = event.target.getBoundingClientRect();\r\n\t\t\t\tthis.setState({showSpellInfo: spell});\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\t\r\n\thandleTooltipDismiss = () => { //Dismiss the spellInfo component.\r\n\t\tthis.timeOutId = setTimeout(() => {\r\n\t\t\tthis.setState({showSpellInfo: false});\t\r\n\t\t});\r\n\t};\r\n\t\r\n\thandleTooltipFocus = () => { //Cancel the above function when the component is focused.\r\n\t\tclearTimeout(this.timeOutId);\r\n\t};\r\n\t\r\n\tcancelSpell = () => { //Unmounts spell component.\r\n\t\tthis.props.combatSpellHandler(false);\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tconst spellbookEquipped = this.props.equippedItems.weapon.id === 3;\r\n\t\treturn <div id=\"spellContainer\">\r\n\t\t\t<p className=\"spellTitle\">Spells</p>\r\n\t\t\t<div className=\"spellContainerOverflow\">\r\n\t\t\t\t{spellbookEquipped ? (\r\n\t\t\t\t\tthis.spellSelect()\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p id=\"noSpellbookText\">Equip a Spellbook to cast spells.</p>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{this.state.showSpellInfo ? <SpellInfo {...this.props} {...this.state} dismiss={this.handleTooltipDismiss} focus={this.handleTooltipFocus} key={this.state.showSpellInfo.name} /> : null}\r\n\t\t</div>\r\n\t};\r\n};\r\n\t\t\r\nexport default Spells","import React from 'react';\r\nimport RollD4 from './Dice/d4.js';\r\nimport RollD6 from './Dice/d6.js';\r\nimport RollD8 from './Dice/d8.js';\r\nimport RollD10 from './Dice/d10.js';\r\nimport RollD12 from './Dice/d12.js';\r\nimport RollD20 from './Dice/d20.js';\r\nimport Items from './items.js';\r\nimport Spells from './spells.js';\r\n\r\nclass CombatActions extends React.Component {\r\n\t\r\n\tactionRender = () => {\r\n\t\tlet actions = [];\r\n\t\tif (this.props.hitPoints > 0) {\r\n\t\t\tif (this.props.weaponSwap){ //Swap weapon\r\n\t\t\t\tactions.push(<Items key=\"weapons\" {...this.props} />);\r\n\t\t\t} else if (this.props.combatSpell) { //Cast spell\r\n\t\t\t\tactions.push(<Spells key=\"spells\" {...this.props} />)\r\n\t\t\t} else if (this.props.combatItem) { //Use item\r\n\t\t\t\tactions.push(<Items key=\"items\" {...this.props} />);\r\n\t\t\t} else if (this.props.combatTurn === \"player\") {\r\n\t\t\t\tif (this.props.equippedItems.weapon !== \"\") {\r\n\t\t\t\t\tif (this.props.equippedItems.weapon.id !== 3) {\r\n\t\t\t\t\t\tactions.push(<div className=\"action\" id=\"combatAttack\" key=\"attack\" onClick={this.attack} onKeyDown={this.keyCheck} tabIndex=\"0\">Attack ({this.props.equippedItems.weapon.name})</div>)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactions.push(<div className=\"action\" id=\"combatCast\" key=\"cast\" onClick={this.cast} onKeyDown={this.keyCheck} tabIndex=\"0\">Cast a Spell</div>)\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tif (this.props.inventoryContents.some(item => item.equipSlot === \"weapon\")) {\r\n\t\t\t\t\tif (this.props.weaponSwapLock === false) {\r\n\t\t\t\t\t\tactions.push(<div className=\"action\" id=\"combatChangeWeapon\" key=\"changeWeapon\" onClick={this.changeWeapon} onKeyDown={this.keyCheck} tabIndex=\"0\">Change Weapon</div>)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactions.push(<div className=\"action locked\" id=\"combatChangeWeaponLocked\" key=\"changeWeapon\" tabIndex=\"0\">Change Weapon</div>)\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\tif (this.props.inventoryContents.some(item => item.useable === true && item.id !== 9)) {\r\n\t\t\t\t\tif (this.props.itemUseLock === false) {\r\n\t\t\t\t\t\tactions.push(<div className=\"action\" id=\"combatUseItem\" key=\"useItem\" onClick={this.useItem} onKeyDown={this.keyCheck} tabIndex=\"0\">Use Item</div>)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactions.push(<div className=\"action locked\" id=\"combatUseItemLocked\" key=\"useItem\" tabIndex=\"0\">Use Item</div>)\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tactions.push(<div className=\"action\" id=\"turnContinue\" key=\"turnContinue\" onClick={this.turnContinue} onKeyDown={this.keyCheck} tabIndex=\"0\">Continue</div>)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tactions.push(<div className=\"action\" id=\"combatGameOver\" key=\"combatGameOver\" onClick={this.gameOver} onKeyDown={this.keyCheck} tabIndex=\"0\">You have been defeated!</div>)\r\n\t\t}\r\n\t\treturn actions;\r\n\t};\r\n\t\r\n\tkeyCheck = (event) => {if (event.keyCode === 32) { //Confirm if the space bar is pressed for accessibility purposes.\r\n\t\tswitch(event.target.id) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatAttack\":\r\n\t\t\t\tthis.attack();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatCast\":\r\n\t\t\t\tthis.cast();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatCancelSpell\":\r\n\t\t\t\tthis.cancelSpell();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatChangeWeapon\":\r\n\t\t\t\tthis.changeWeapon();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"turnContinue\":\r\n\t\t\t\tthis.turnContinue();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatEnd\":\r\n\t\t\t\tthis.combatEnd();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatGameOver\":\r\n\t\t\t\tthis.gameOver();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"combatUseItem\":\r\n\t\t\t\tthis.useItem();\r\n\t\t\t\tbreak;\r\n\t\t};\r\n\t}};\r\n\t\r\n\tattack = () => { //Calculates damage from player weapon attacks.\r\n\t\tconst bonusDamage = () => {\r\n\t\t\tswitch(this.props.equippedItems.weapon.stat) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"strength\":\r\n\t\t\t\t\treturn Math.floor(this.props.stats.stat.strength / 4);\r\n\t\t\t\tcase \"dexterity\":\r\n\t\t\t\t\treturn Math.floor(this.props.stats.stat.dexterity / 4);\r\n\t\t\t\tcase \"intelligence\":\r\n\t\t\t\t\treturn Math.floor(this.props.stats.stat.intelligence / 4);\r\n\t\t\t\tcase \"vitality\":\r\n\t\t\t\t\treturn Math.floor(this.props.stats.stat.vitality / 4);\r\n\t\t\t};\r\n\t\t};\r\n\t\tconst damage = (roll, multiplier, weaponDamageBonus) => {\r\n\t\t\tlet result = 0;\r\n\t\t\tswitch(roll) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"d4\":\r\n\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\tresult += RollD4();\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn result + bonusDamage() + weaponDamageBonus;\r\n\t\t\t\tcase \"d6\":\r\n\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\tresult += RollD6();\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn result + bonusDamage() + weaponDamageBonus;\r\n\t\t\t\tcase \"d8\":\r\n\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\tresult += RollD8();\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn result + bonusDamage() + weaponDamageBonus;\r\n\t\t\t\tcase \"d10\":\r\n\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\tresult += RollD10();\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn result + bonusDamage() + weaponDamageBonus;\r\n\t\t\t\tcase \"d12\":\r\n\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\tresult += RollD12();\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn result + bonusDamage() + weaponDamageBonus;\r\n\t\t\t\tcase \"d20\":\r\n\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\tresult += RollD20();\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn result + bonusDamage() + weaponDamageBonus;\r\n\t\t\t};\r\n\t\t};\r\n\t\tlet weapon = this.props.equippedItems.weapon;\r\n\t\tconst attackDamage = damage(weapon.damage.substring(weapon.damage.length, weapon.damage.indexOf('d')), weapon.damage.substring(0, weapon.damage.indexOf('d')), weapon.bonus);\r\n\t\tthis.props.enemyHitPointsUpdate(attackDamage);\r\n\t\tthis.props.damageDisplay(attackDamage);\r\n\t\tthis.props.damageBreakdown((attackDamage - bonusDamage() - weapon.bonus), bonusDamage());\r\n\t\tthis.props.turnOrder();\r\n\t};\r\n\t\r\n\tcast = () => { //Mounts spell component.\r\n\t\tthis.props.combatSpellHandler(true);\r\n\t};\r\n\t\r\n\tchangeWeapon = () => { //Filters weapons to change to.\r\n\t\tthis.props.weaponSwapHandler(true);\r\n\t};\r\n\t\r\n\tuseItem = () => {\r\n\t\tthis.props.combatItemHandler(true); //Filters items to use.\r\n\t};\r\n\t\r\n\t//Unmounting Weapons and Items have been moved to the Items component.\r\n\t//Unmounting spells has been moved to the Spell component.\r\n\t\r\n\tcombatEnd = () => { //Handles things at the end of combat.\r\n\t\tthis.props.spellDurationClear(5);\r\n\t\tthis.props.armourBonusUpdate(0);\r\n\t\tthis.props.combatLock(false);\r\n\t\tthis.props.allocateHandler(true, this.props.enemy.statPointReward);\r\n\t\tthis.props.mainHandler(window.$combatValueSnapshot, 1); //Sets the value after victory to the loot for each battle. ActionNum is set to 1 for \"Continue\".\r\n\t};\r\n\t\r\n\tgameOver = () => { //Sets Game Over screen after player reaches 0 hit points.\r\n\t\tthis.props.gameover();\r\n\t};\r\n\t\r\n\tturnContinue = () => { //Handles what happens when \"Continue\" is selected on the enemy turn in combat.\r\n\t\tlet actions = [];\r\n\t\tlet useActions = [];\r\n\t\tlet damageArray = [];\r\n\t\tlet healingArray = [];\r\n\t\tconst enemyActionSelect = () => { //Handles which abilities enemies will use under different conditions.\r\n\t\t\tswitch(this.props.enemy.id) {\r\n\t\t\t\tcase 1: //Skeleton\r\n\t\t\t\t\tif (this.props.enemy.hitPoints >= (this.props.enemy.maxHitPoints / 2)) {\r\n\t\t\t\t\t\tactions = [\"Sword\"];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactions = [\"Sword\", \"Bone Throw\"];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 2: //Mimic\r\n\t\t\t\t\tif (RollD10() > 4) {\r\n\t\t\t\t\t\tactions = [\"Bite\"];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactions = [\"Acid\"];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 3: //Sphinx\r\n\t\t\t\t\tif (this.props.enemy.hitPoints <= (this.props.enemy.maxHitPoints / 4) && this.props.enemyHealing.length === 0) {\r\n\t\t\t\t\t\tactions = [\"Renewal\"];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (RollD10() < 4) {\r\n\t\t\t\t\t\tactions = [\"Bite\", \"Claw\"];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (RollD8() <= 3) {\r\n\t\t\t\t\t\tactions = [\"Claw\"];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactions = [\"Bite\"];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t};\r\n\t\t\tactions.forEach((ability) => {\r\n\t\t\t\tconst enemyAbilities = this.props.enemy.abilities;\r\n\t\t\t\tuseActions.push(enemyAbilities.find(enemyAbilities => enemyAbilities.name === ability));\r\n\t\t\t});\r\n\t\t};\r\n\t\tenemyActionSelect();\r\n\t\tfor (let i = 0; i < useActions.length; i++) {\r\n\t\t\tconst ability = useActions[i];\r\n\t\t\tif (ability.type === \"attack\") { //Calculates damage from enemy attacks.\r\n\t\t\t\t\tconst enemyDamage = (roll, multiplier) => {\r\n\t\t\t\t\t\tlet result = 0;\r\n\t\t\t\t\t\tswitch(roll) {\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"d4\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD4();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + ability.damageBonus - this.props.armour;\r\n\t\t\t\t\t\t\tcase \"d6\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD6();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + ability.damageBonus - this.props.armour;\r\n\t\t\t\t\t\t\tcase \"d8\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD8();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + ability.damageBonus - this.props.armour;\r\n\t\t\t\t\t\t\tcase \"d10\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD10();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + ability.damageBonus - this.props.armour;\r\n\t\t\t\t\t\t\tcase \"d12\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD12();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + ability.damageBonus - this.props.armour;\r\n\t\t\t\t\t\t\tcase \"d20\":\r\n\t\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\t\tresult += RollD20();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn result + ability.damageBonus - this.props.armour;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet damage = enemyDamage(ability.damage.substring(ability.damage.length, ability.damage.indexOf('d')), ability.damage.substring(0, ability.damage.indexOf('d')));\r\n\t\t\t\t\tdamageArray.push(damage);\r\n\t\t\t\t\tlet finalDamage = damageArray.reduce((a, b) => a + b);\r\n\t\t\t\t\tif (finalDamage > 0) {\r\n\t\t\t\t\t\tthis.props.hitPointsUpdate(-finalDamage);\r\n\t\t\t\t\t};\r\n\t\t\t} else if (ability.type === \"heal\") { //Calculates enemy healing.\r\n\t\t\t\tconst enemyHealing = (roll, multiplier) => {\r\n\t\t\t\t\tlet result = 0;\r\n\t\t\t\t\tswitch(roll) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"d4\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD4();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + ability.healBonus;\r\n\t\t\t\t\t\tcase \"d6\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD6();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + ability.healBonus;\r\n\t\t\t\t\t\tcase \"d8\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD8();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + ability.healBonus;\r\n\t\t\t\t\t\tcase \"d10\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD10();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + ability.healBonus;\r\n\t\t\t\t\t\tcase \"d12\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD12();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + ability.healBonus;\r\n\t\t\t\t\t\tcase \"d20\":\r\n\t\t\t\t\t\t\tfor(let n = 0; n < multiplier; n++) {\r\n\t\t\t\t\t\t\t\tresult += RollD20();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn result + ability.healBonus;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\tlet healing = enemyHealing(ability.healing.substring(ability.healing.length, ability.healing.indexOf('d')), ability.healing.substring(0, ability.healing.indexOf('d')));\r\n\t\t\t\thealingArray.push(healing);\r\n\t\t\t\tlet finalHealing = healingArray.reduce((a, b) => a + b);\r\n\t\t\t\tif (finalHealing > 0) {\r\n\t\t\t\t\tthis.props.enemyHitPointsUpdate(-finalHealing);\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t};\r\n\t\tthis.props.enemyActionUpdate(useActions, damageArray, healingArray);\r\n\t\tthis.props.turnOrder();\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tif (this.props.enemy.hitPoints > 0) {\r\n\t\t\treturn <div className=\"actions\">\r\n\t\t\t\t{this.actionRender()}\r\n\t\t\t</div>\r\n\t\t} else {\r\n\t\t\treturn <div className=\"actions\">\r\n\t\t\t\t<div className=\"action\" id=\"combatEnd\" key=\"combatEnd\" onClick={this.combatEnd} onKeyDown={this.keyCheck} tabIndex=\"0\">Continue</div>\r\n\t\t\t</div>\r\n\t\t};\r\n\t};\r\n};\r\n\r\nexport default CombatActions;","import React from 'react';\r\nimport CombatContent from './combatContent.js';\r\nimport CombatActions from './combatActions.js';\r\n\r\nclass Combat extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcombatTurn: \"player\",\r\n\t\t\tplayerDamage: 0,\r\n\t\t\tplayerHealing: 0,\r\n\t\t\tplayerDamageBreakdown: [],\r\n\t\t\tcombatPreviousSpell: \"\",\r\n\t\t\tenemyAction: [],\r\n\t\t\tenemyDamage: [],\r\n\t\t\tenemyHealing: []\r\n\t\t};\r\n\t};\r\n\t\r\n\tturnOrder = () => { //Handles the turn order.\r\n\t\tif (this.state.combatTurn === \"player\") {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcombatTurn: \"enemy\"\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.props.spellCooldownUpdate();\r\n\t\t\tthis.props.spellDurationUpdate();\r\n\t\t\tif (this.props.spellDuration.shield === 0) {\r\n\t\t\t\tthis.props.armourBonusUpdate(0);\r\n\t\t\t};\r\n\t\t\tthis.props.combatLock(false);\r\n\t\t\tthis.setState({\r\n\t\t\t\tplayerDamage: 0,\r\n\t\t\t\tplayerHealing: 0,\r\n\t\t\t\tcombatTurn: \"player\"\r\n\t\t\t});\r\n\t\t};\r\n\t};\r\n\t\r\n\tdamageDisplay = (damage) => { //Track damage dealt by player to enemy.\r\n\t\tthis.setState({\r\n\t\t\tplayerDamage: damage\r\n\t\t});\r\n\t};\r\n\t\r\n\thealingDisplay = (healing) => { //Track healing to the player. \r\n\t\tthis.setState({\r\n\t\t\tplayerHealing: healing\r\n\t\t})\r\n\t}\r\n\t\r\n\tdamageBreakdown = (roll, statBonus, itemBonus) => { //Records damage breakdown to show to player.\r\n\t\tthis.setState({\r\n\t\t\tplayerDamageBreakdown: [roll, statBonus, itemBonus]\r\n\t\t});\r\n\t};\r\n\t\r\n\tenemyAction = (action, damage = 0, healing = 0) => { //Track enemy action taken and damage/healing.\r\n\t\tthis.setState({\r\n\t\t\tenemyAction: action,\r\n\t\t\tenemyDamage: damage,\r\n\t\t\tenemyHealing: healing\r\n\t\t});\r\n\t};\r\n\t\r\n\tcombatPreviousSpellHandler = (spell) => { //Tracks the previously cast spell.\r\n\t\tthis.setState({\r\n\t\t\tcombatPreviousSpell: spell\r\n\t\t});\r\n\t};\r\n\t\r\n\trender = () => {\r\n\t\treturn <div id=\"combatDiv\">\r\n\t\t\t<div className=\"text\">\r\n\t\t\t\t<CombatContent {...this.state}\r\n\t\t\t\t\t\t\t   {...this.props} />\r\n\t\t\t</div>\r\n\t\t\t<div id=\"actionContainer\">\r\n\t\t\t\t<CombatActions {...this.state}\r\n\t\t\t\t\t\t\t   {...this.props}\r\n\t\t\t\t\t\t\t   turnOrder={this.turnOrder}\r\n\t\t\t\t\t\t\t   damageDisplay={this.damageDisplay}\r\n\t\t\t\t\t\t\t   enemyActionUpdate={this.enemyAction}\r\n\t\t\t\t\t\t\t   damageBreakdown={this.damageBreakdown}\r\n\t\t\t\t\t\t\t   previousSpellHandler={this.combatPreviousSpellHandler}\r\n\t\t\t\t\t\t\t   healingDisplay={this.healingDisplay} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t};\r\n};\r\n\r\nexport default Combat;","const CombatEnemies = [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tname: \"Skeleton\",\r\n\t\t\thitPoints: 12,\r\n\t\t\tmaxHitPoints: 12,\r\n\t\t\tstatPointReward: 2,\r\n\t\t\tabilities: [\r\n\t\t\t\t{id: 1,\r\n\t\t\t\t name: \"Sword\",\r\n\t\t\t\t type: \"attack\",\r\n\t\t\t\t damage: \"1d4\",\r\n\t\t\t\t damageBonus: 1,\r\n\t\t\t\t description: \"The Skeleton swings wildly at you with its sword.\"},\r\n\t\t\t\t{id: 2,\r\n\t\t\t\t name: \"Bone Throw\",\r\n\t\t\t\t type: \"attack\",\r\n\t\t\t\t damage: \"1d4\",\r\n\t\t\t\t damageBonus: 0,\r\n\t\t\t\t description: \"The Skeleton also pulls one of its own bones from its body and hurls it at you.\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tname: \"Mimic\",\r\n\t\t\thitPoints: 30,\r\n\t\t\tmaxHitPoints: 30,\r\n\t\t\tstatPointReward: 4,\r\n\t\t\tabilities: [\r\n\t\t\t\t{id: 1,\r\n\t\t\t\t name: \"Bite\",\r\n\t\t\t\t type: \"attack\",\r\n\t\t\t\t damage: \"1d8\",\r\n\t\t\t\t damageBonus: 0,\r\n\t\t\t\t description: \"The mimic gnashes at you with its sharp teeth.\"},\r\n\t\t\t\t{id: 2,\r\n\t\t\t\t name: \"Acid\",\r\n\t\t\t\t type: \"attack\",\r\n\t\t\t\t damage: \"1d12\",\r\n\t\t\t\t damageBonus: 2,\r\n\t\t\t\t description: \"The mimic spits a globule of acid at you.\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tname: \"Sphinx\",\r\n\t\t\thitPoints: 45,\r\n\t\t\tmaxHitPoints: 45,\r\n\t\t\tstatPointReward: 8,\r\n\t\t\tabilities: [\r\n\t\t\t\t{id: 1,\r\n\t\t\t\t name: \"Bite\",\r\n\t\t\t\t type: \"attack\",\r\n\t\t\t\t damage: \"1d8\",\r\n\t\t\t\t damageBonus: 1,\r\n\t\t\t\t description: \"The sphinx bites at you with her huge teeth.\"},\r\n\t\t\t\t{id: 2,\r\n\t\t\t\t name: \"Claw\",\r\n\t\t\t\t type: \"attack\",\r\n\t\t\t\t damage: \"3d4\",\r\n\t\t\t\t damageBonus: 3,\r\n\t\t\t\t description: \"The sphinx strikes at you with her claw.\"},\r\n\t\t\t\t {id: 3,\r\n\t\t\t\t name: \"Renewal\",\r\n\t\t\t\t type: \"heal\",\r\n\t\t\t\t healing: \"3d4\",\r\n\t\t\t\t healBonus: 4,\r\n\t\t\t\t description: \"The sphinx channels magic to heal her wounds.\"}\r\n\t\t\t]\r\n\t\t},\r\n\t];\r\n\t\r\nexport default CombatEnemies","import React from 'react';\r\n\r\nclass Gameover extends React.Component {\r\n\t\r\n\trefreshPage = () => {\r\n\t\twindow.location.reload();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn <div id=\"gameover\">\r\n\t\t\t<div>Your adventure is at an end.</div>\r\n\t\t\t<div>Will you try again?</div>\r\n\t\t\t<div id=\"restart\" onClick={this.refreshPage}>New Adventure</div>\r\n\t\t</div>\r\n\t}\r\n}\r\n\r\nexport default Gameover;","import React from 'react';\r\nimport Text from './text.js';\r\nimport Actions from './actions.js';\r\nimport Items from './items.js';\r\nimport ItemList from './itemList.js';\r\nimport Spells from'./spells.js';\r\nimport SpellList from './spellList.js';\r\nimport Combat from './combat.js';\r\nimport CombatEnemies from './combatEnemies.js';\r\nimport Gameover from './gameover.js';\r\n\r\nclass Game extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.shuffle = this.shuffle.bind(this);\r\n\t\tthis.state = {\r\n\t\t\tgameover: false,\r\n\t\t\tstats: {stat: {strength: 0, dexterity: 0, intelligence: 0, vitality: 0}},\r\n\t\t\tallocate: {allocate: true, points: 20},//This controls whether or not points can be allocated to statistics at the current time and how many points are available.\r\n\t\t\tactionCases: {\tcase5: [true, true, true, true],\r\n\t\t\t\t\t\t\tcase8: [true, true, true, true],\r\n\t\t\t\t\t\t\tcase12: [true]},\r\n\t\t\tinventoryContents: [],\r\n\t\t\tequippedItems: {head: \"\", torso: \"\", legs: \"\", boots: \"\", gloves: \"\", weapon: \"\"},\r\n\t\t\tspellbook: [],\r\n\t\t\thitPoints: 10,\r\n\t\t\tmaxHitPoints: 10,\r\n\t\t\thealing: 0,\r\n\t\t\tenemy: \"\",\r\n\t\t\tweaponSwap: false,\r\n\t\t\tcombatSpell: false,\r\n\t\t\tcombatItem: false,\r\n\t\t\tarmour: 0,\r\n\t\t\tarmourBonus: 0,\r\n\t\t\tlatestSpell: {}, //Tracks the most recent spell added to the spellbook.\r\n\t\t\tpreviousSpell: \"\", //Tracks the most recent spell cast outside of combat (tracking inside combat is done in Combat component).\r\n\t\t\treceivedItems: [],\r\n\t\t\tweaponSwapLock: false, //These 2 lock states have to be here instead of the combat component because weapon swapping in combat is handled in this component.\r\n\t\t\titemUseLock: false,\r\n\t\t\tallSpellsUnlocked: false, //Sets to true once all possible spells have been added to the spellbook.\r\n\t\t\tinputRequired: false //Toggles an input field in the Action component for user inputted answer.\r\n\t\t};\r\n\t};\r\n\t\r\n\tcomponentDidMount = () => this.statisticHandler(0, 0, 0, 0); ///Sets all stats to 0 at game start.\r\n\t\r\n\tallocateHandler = (allocate, points) => { //For handling stat point allocation for stat improvements.\r\n\t\tthis.setState ({\r\n\t\t\tallocate: {\r\n\t\t\t\tallocate: allocate,\r\n\t\t\t\tpoints: points\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t\r\n\thitPointsHandler = (HP) => { //Used to add or remove current hit points.\r\n\t\tlet oldHitPoints = this.state.hitPoints;\r\n\t\tlet newHitPoints = oldHitPoints + HP;\r\n\t\tlet finalHitPoints;\r\n\t\tif (newHitPoints < 0) {\r\n\t\t\tfinalHitPoints = 0;\r\n\t\t} else if (newHitPoints > this.state.maxHitPoints) {\r\n\t\t\tfinalHitPoints = this.state.maxHitPoints;\r\n\t\t} else {\r\n\t\t\tfinalHitPoints = newHitPoints;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\thitPoints: finalHitPoints\r\n\t\t});\r\n\t\tif (HP > 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thealing: HP\r\n\t\t\t});\r\n\t\t};\r\n\t};\r\n\t\r\n\thitPointsMaxHandler = (hitPointsAdd) => { //Used to update user's maximum hit points by means other than increasing vitality. Pass negative values to remove hit points.\r\n\t\tlet hitPointsMaxUpdate = this.state.maxHitPoints + hitPointsAdd;\r\n\t\tlet hitPointsUpdate = this.state.hitPoints + hitPointsAdd;\r\n\t\tthis.setState ({\r\n\t\t\tmaxHitPoints: hitPointsMaxUpdate,\r\n\t\t\thitPoints: hitPointsUpdate\r\n\t\t});\r\n\t};\r\n\t\r\n\thealingHandler = () => { //Used to reset healing state to 0;\r\n\t\tthis.setState({\r\n\t\t\thealing: 0\r\n\t\t})\r\n\t}\r\n\t\r\n\tarmourHandler = () => { //Calculates and updates the player's armour value.\r\n\t\tlet wornItems = this.state.equippedItems;\r\n\t\tlet armour = [];\r\n\t\tlet totalArmour;\r\n\t\tlet armourBonus = this.state.armourBonus;\r\n\t\tfor (let x in wornItems) {\r\n\t\t\tif (wornItems[x].hasOwnProperty(\"armour\")) {\r\n\t\t\t\tarmour.push(wornItems[x].armour);\r\n\t\t\t\ttotalArmour = armour.reduce((a, b) => a + b);\r\n\t\t\t};\r\n\t\t};\r\n\t\tif (totalArmour === undefined) {\r\n\t\t\ttotalArmour = 0;\r\n\t\t};\r\n\t\ttotalArmour = (totalArmour + armourBonus);\r\n\t\tthis.setState({\r\n\t\t\tarmour: totalArmour\r\n\t\t});\r\n\t};\r\n\t\r\n\tarmourBonusHandler = (bonus) => { //Handles bonuses to the armour stat (e.g. from the Shield spell).\r\n\t\tthis.setState({\r\n\t\t\tarmourBonus: bonus\r\n\t\t}, () => {\r\n\t\t\tthis.armourHandler();\r\n\t\t});\r\n\t};\r\n\t\r\n\tstatisticHandler = (str, dex, int, vit) => { //Used to update statistics from child components.\r\n\t\tlet strength = this.state.stats.stat.strength + str;\r\n\t\tlet dexterity = this.state.stats.stat.dexterity + dex;\r\n\t\tlet intelligence = this.state.stats.stat.intelligence + int;\r\n\t\tlet vitality = this.state.stats.stat.vitality + vit;\r\n\t\tlet maxHP = this.state.maxHitPoints - this.state.stats.stat.vitality;\r\n\t\tlet currentHP = this.state.hitPoints - this.state.stats.stat.vitality;\r\n\t\tthis.setState ({\r\n\t\t\tstats: {\r\n\t\t\t\tstat: {\r\n\t\t\t\t\tstrength: strength,\r\n\t\t\t\t\tdexterity: dexterity,\r\n\t\t\t\t\tintelligence: intelligence,\r\n\t\t\t\t\tvitality: vitality\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmaxHitPoints: maxHP + vitality,\r\n\t\t\thitPoints: currentHP + vitality\r\n\t\t});\r\n\t};\r\n\t\r\n\tactionLock = (c, i) => { //Disables actions that do not lead onto a new scene after they've been taken.\r\n\t\tlet state = JSON.parse(JSON.stringify(this.state.actionCases));\r\n\t\tlet stateName = \"case\" + c;\r\n\t\tlet index = state[stateName][i];\r\n\t\tindex = false;\r\n\t\tstate[stateName][i] = index;\r\n\t\tlet actionCases = state;\r\n\t\tthis.setState({\r\n\t\t\tactionCases\r\n\t\t});\r\n\t};\r\n\t\r\n\tinventorySort = (a, b) => { //Sort items in the inventory and spellbook alphabetically.\r\n\t\tlet nameA = a.name.toUpperCase();\r\n\t\tlet nameB = b.name.toUpperCase();\r\n\t\tif (nameA < nameB) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (nameA > nameB) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t};\r\n\t\r\n\tinventoryUpdate = (...item) => { //Add items to inventory contents (Add multiple items at once by passing more arguments).\r\n\t\tlet oldInventory = this.state.inventoryContents.slice();\r\n\t\tlet eachItem = [];\r\n\t\tconst items = ItemList;\r\n\t\tfunction checkItems(i) {\r\n\t\t\teachItem.push(items.find((items) => items.id === i));\r\n\t\t};\r\n\t\titem.forEach((item) => {\r\n\t\t\tcheckItems(item);\r\n\t\t});\r\n\t\tlet newInventory = oldInventory.concat([eachItem]);\r\n\t\tlet flatInventory = newInventory.flat();\r\n\t\tflatInventory.sort(this.inventorySort);\r\n\t\tthis.setState(() => {\r\n\t\t\treturn {inventoryContents: flatInventory};\r\n\t\t});\r\n\t};\r\n\t\r\n\tinventoryRemove = (...item) => { //Remove items from inventory contents.\r\n\t\tlet inventory = this.state.inventoryContents.slice();\r\n\t\titem.forEach((i) => {\r\n\t\t\tlet removeItem = inventory.findIndex((element) => element.id === i);\r\n\t\t\tinventory.splice(removeItem, 1);\r\n\t\t});\r\n\t\tthis.setState({inventoryContents: inventory});\r\n\t};\r\n\t\r\n\tspellUpdate = (...spells) => { //Add a spell to the spellbook.\r\n\t\tlet oldSpells = this.state.spellbook.slice();\r\n\t\tlet addedSpells = [];\r\n\t\tfunction checkSpells(s) {\r\n\t\t\taddedSpells.push(SpellList.find((spellList) => spellList.id === s));\r\n\t\t};\r\n\t\tspells.forEach((spells) => {\r\n\t\t\tcheckSpells(spells);\r\n\t\t});\r\n\t\tlet newSpells = oldSpells.concat([addedSpells]);\r\n\t\tlet flatSpellbook = newSpells.flat();\r\n\t\tflatSpellbook.sort(this.inventorySort);\r\n\t\tthis.setState({spellbook: flatSpellbook});\r\n\t}\r\n\t\r\n\tequipUpdate = (item) => { //Equip items when selected in the inventory.\r\n\t\tlet equipState = {...this.state.equippedItems};\r\n\t\tlet inventoryState = this.state.inventoryContents;\r\n\t\tlet inventoryUpdate = inventoryState.filter(element => element !== item);\r\n\t\tconst combatCheck = () => {\r\n\t\t\tif (this.props.value === \"combat\") {\r\n\t\t\t\treturn \"combat\";\r\n\t\t\t} else {\r\n\t\t\t\treturn \"inventory\";\r\n\t\t\t}\r\n\t\t};\r\n\t\tswitch(item.equipSlot) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t\tcase \"head\":\r\n\t\t\t\tequipState.head = item;\r\n\t\t\t\tif(this.state.equippedItems.head !== \"\") {\r\n\t\t\t\t\tinventoryUpdate.push(this.state.equippedItems.head);\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryUpdate.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryUpdate.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"torso\":\r\n\t\t\t\tequipState.torso = item;\r\n\t\t\t\tif(this.state.equippedItems.torso !== \"\") {\r\n\t\t\t\t\tinventoryUpdate.push(this.state.equippedItems.torso);\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryUpdate.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryUpdate.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"legs\":\r\n\t\t\t\tequipState.legs = item;\r\n\t\t\t\tif(this.state.equippedItems.legs !== \"\") {\r\n\t\t\t\t\tinventoryUpdate.push(this.state.equippedItems.legs);\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryUpdate.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryUpdate.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"boots\":\r\n\t\t\t\tequipState.boots = item;\r\n\t\t\t\tif(this.state.equippedItems.boots !== \"\") {\r\n\t\t\t\t\tinventoryUpdate.push(this.state.equippedItems.boots);\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryUpdate.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryUpdate.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"gloves\":\r\n\t\t\t\tequipState.gloves = item;\r\n\t\t\t\tif(this.state.equippedItems.gloves !== \"\") {\r\n\t\t\t\t\tinventoryUpdate.push(this.state.equippedItems.gloves);\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryUpdate.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryUpdate.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"weapon\":\r\n\t\t\t\tequipState.weapon = item;\r\n\t\t\t\tif(this.state.equippedItems.weapon !== \"\") {\r\n\t\t\t\t\tinventoryUpdate.push(this.state.equippedItems.weapon);\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.mainHandler(combatCheck(), inventoryUpdate.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryUpdate.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tif (this.props.value === \"combat\") {\r\n\t\t\t\t\tthis.setState ({\r\n\t\t\t\t\t\tweaponSwap: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.combatLock(true);\r\n\t\t\t\t};\r\n\t\t};\r\n\t};\r\n\t\r\n\tunequipUpdate = (slot) => { //Unequip items when selected in the equipment area.\r\n\t\tlet equipState = {...this.state.equippedItems};\r\n\t\tlet inventoryState = this.state.inventoryContents;\r\n\t\tswitch(slot.equipSlot) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t\tcase \"head\":\r\n\t\t\t\tequipState.head = \"\";\r\n\t\t\t\tinventoryState.push(slot);\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryState.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryState.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"torso\":\r\n\t\t\t\tequipState.torso = \"\";\r\n\t\t\t\tinventoryState.push(slot);\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryState.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryState.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"legs\":\r\n\t\t\t\tequipState.legs = \"\";\r\n\t\t\t\tinventoryState.push(slot);\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryState.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryState.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"boots\":\r\n\t\t\t\tequipState.boots = \"\";\r\n\t\t\t\tinventoryState.push(slot);\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryState.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryState.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"gloves\":\r\n\t\t\t\tequipState.gloves = \"\";\r\n\t\t\t\tinventoryState.push(slot);\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryState.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryState.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"weapon\":\r\n\t\t\t\tequipState.weapon = \"\";\r\n\t\t\t\tinventoryState.push(slot);\r\n\t\t\t\tthis.props.mainHandler(\"inventory\", inventoryState.length);\r\n\t\t\t\tthis.setState ({\r\n\t\t\t\t\tequippedItems: equipState,\r\n\t\t\t\t\tinventoryContents: inventoryState.sort(this.inventorySort)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.armourHandler();\r\n\t\t\t\t});\r\n\t\t};\r\n\t\tthis.armourHandler();\r\n\t};\r\n\t\r\n\tenemyNumber = (id) => { //Receives an enemy ID from Actions to pass to Combat.\r\n\t\tthis.setState ({\r\n\t\t\tenemy: CombatEnemies.find(enemy => enemy.id === id)\r\n\t\t});\r\n\t};\r\n\t\r\n\tenemyHitPointHandler = (damage) => { //Updates enemy hit points during combat.\r\n\t\tlet enemyHitPointsOld = this.state.enemy.hitPoints;\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tenemy: {\r\n\t\t\t\t...prevState.enemy,\r\n\t\t\t\thitPoints: enemyHitPointsOld - damage\r\n\t\t\t}\r\n\t\t}));\r\n\t};\r\n\t\r\n\tcombatWeaponSwapHandler = (bool) => { //Toggles the changing of weapons during combat.\r\n\t\tthis.setState ({\r\n\t\t\tweaponSwap: bool\r\n\t\t});\r\n\t};\r\n\t\r\n\tcombatSpellHandler = (bool) => { //Toggles whether spells are being used in combat.\r\n\t\tthis.setState ({\r\n\t\t\tcombatSpell: bool\r\n\t\t});\r\n\t};\r\n\t\r\n\tcombatItemHandler = (bool) => { //Toggles using items in combat.\r\n\t\tthis.setState ({\r\n\t\t\tcombatItem: bool\r\n\t\t});\r\n\t};\r\n\t\r\n\tshuffle = (array) => { //Shuffles arrays.\r\n\t\tlet currentIndex = array.length, randomIndex;\r\n\t\t\twhile (currentIndex !== 0) {\r\n\t\t\t\trandomIndex = Math.floor(Math.random() * currentIndex);\r\n\t\t\t\tcurrentIndex--;\r\n\t\t\t\t[array[currentIndex], array[randomIndex]] = [\r\n\t\t\t\tarray[randomIndex], array[currentIndex]];\r\n\t\t\t};\r\n\t\treturn array;\r\n\t};\r\n\r\n\t\r\n\tspellPicker = () => { //Chooses a random spell that the player does not know and adds it to the spellbook.\r\n\t\twindow.$spellPickerValueSnapshot = this.props.value;\r\n\t\twindow.$spellPickerActionSnapshot = this.props.actionNum;\r\n\t\tlet spellbook = this.state.spellbook.slice();\r\n\t\tlet spells = SpellList.filter(x => !spellbook.includes(x));\r\n\t\tspells.filter(x => !x.id === 11);\r\n\t\tconst shuffledSpells = this.shuffle(spells);\r\n\t\tthis.spellUpdate(shuffledSpells[0].id);\r\n\t\tthis.setState({\r\n\t\t\tlatestSpell: shuffledSpells[0]\r\n\t\t});\r\n\t};\r\n\t\r\n\titemPicker = (mod, amount) => { //Chooses a random item that the player does not have (or can have multiple of) and adds it to the inventory.\r\n\t\tlet inventory = this.state.inventoryContents.slice();\r\n\t\tlet equipped = this.state.equippedItems;\r\n\t\tlet finalTreasure = [];\r\n\t\tfor (let x in equipped) {\r\n\t\t\tif (equipped[x].hasOwnProperty(\"id\")) {\r\n\t\t\t\tinventory.push(equipped[x]);\r\n\t\t\t};\r\n\t\t};\r\n\t\tlet items = ItemList.filter(x => x.hasOwnProperty(\"treasure\"));\r\n\t\tlet treasure = items.filter(x => x.treasure !== 1);\r\n\t\ttreasure = treasure.filter(x => !inventory.includes(x));\r\n\t\tlet add = items.filter(x => x.treasure === 1);\r\n\t\tfor (let x = 0; x < add.length; x++) {\r\n\t\t\ttreasure.push(add[x]);\r\n\t\t};\r\n\t\ttreasure.filter(x => x.treasure <= mod);\r\n\t\tfunction treasureShuffle(array) { //Can't just use the shuffle function in here cause of scope something or other blah blah blah.\r\n\t\t\tlet currentIndex = array.length, randomIndex;\r\n\t\t\t\twhile (currentIndex !== 0) {\r\n\t\t\t\t\trandomIndex = Math.floor(Math.random() * currentIndex);\r\n\t\t\t\t\tcurrentIndex--;\r\n\t\t\t\t\t[array[currentIndex], array[randomIndex]] = [\r\n\t\t\t\t\tarray[randomIndex], array[currentIndex]];\r\n\t\t\t\t};\r\n\t\t\treturn array;\r\n\t\t};\r\n\t\tfor (let i = 0; i < amount; i++) {\r\n\t\t\tlet shuffledTreasure = treasureShuffle(treasure.slice());\r\n\t\t\tif (shuffledTreasure[0].treasure !== 1) {\r\n\t\t\t\ttreasure.splice(treasure.findIndex(item => item.id === shuffledTreasure[0].id), 1);\r\n\t\t\t\tfinalTreasure.push(shuffledTreasure.shift().id);\r\n\t\t\t} else {\r\n\t\t\t\tfinalTreasure.push(shuffledTreasure.shift().id);\r\n\t\t\t};\r\n\t\t};\r\n\t\tthis.inventoryUpdate(...finalTreasure);\r\n\t\tfor (let i = 0; i <= finalTreasure.length; i++) {\r\n\t\t\tif (finalTreasure[i] === 3) {\r\n\t\t\t\tthis.spellPicker();\r\n\t\t\t};\r\n\t\t};\r\n\t\tlet finalName = [];\r\n\t\tfor (let i = 0; i < finalTreasure.length; i++) {\r\n\t\t\tfinalName.push(ItemList.find((items) => items.id === finalTreasure[i]));\r\n\t\t};\r\n\t\tthis.setState({\r\n\t\t\treceivedItems: finalName\r\n\t\t})\r\n\t};\r\n\t\r\n\tpreviousSpellHandler = (spell) => { //Tracks the previously cast spell outside combat.\r\n\t\tthis.setState({\r\n\t\t\tpreviousSpell: spell\r\n\t\t});\r\n\t};\r\n\t\r\n\tcombatLock = (bool) => { //Locks the weapon swap and use item options after one of them is used until next turn.\r\n\t\tthis.setState({\r\n\t\t\tweaponSwapLock: bool,\r\n\t\t\titemUseLock: bool\r\n\t\t});\r\n\t};\r\n\t\r\n\trequireInput = (bool) => { //Toggles the inputRequired state.\r\n\t\tthis.setState({\r\n\t\t\tinputRequired: bool\r\n\t\t});\r\n\t};\r\n\t\r\n\tgameover = () => { //For setting gameover in combat.\r\n\t\tthis.setState ({\r\n\t\t\tgameover: true\r\n\t\t});\r\n\t};\r\n\t\r\n\tactionRender = () => { //For displaying the correct Action component/s.\r\n\t\tswitch(this.props.value) {\r\n\t\t\tcase \"inventory\":\r\n\t\t\t\treturn <div id=\"actionContainer\">\r\n\t\t\t\t\t<Items\t{...this.state}\r\n\t\t\t\t\t\t\t{...this.props}\r\n\t\t\t\t\t\t\titemEquipHandler={this.equipUpdate}\r\n\t\t\t\t\t\t\thitPointsUpdate={this.hitPointsHandler}\r\n\t\t\t\t\t\t\tinventoryRemove={this.inventoryRemove}\r\n\t\t\t\t\t\t\tspellPickerHandler={this.spellPicker} />\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t<Spells {...this.state}\r\n\t\t\t\t\t\t\t{...this.props}\r\n\t\t\t\t\t\t\thitPointsUpdate={this.hitPointsHandler}\r\n\t\t\t\t\t\t\thealingUpdate={this.healingHandler}\r\n\t\t\t\t\t\t\tpreviousSpellUpdate={this.previousSpellHandler} />\r\n\t\t\t\t</div>\r\n\t\t\tdefault:\r\n\t\t\t\treturn <div id=\"actionContainer\">\r\n\t\t\t\t\t<Actions {...this.state}\r\n\t\t\t\t\t\t\t {...this.props}\r\n\t\t\t\t\t\t\t statsHandler={this.statisticHandler}\r\n\t\t\t\t\t\t\t allocateHandler={this.allocateHandler}\r\n\t\t\t\t\t\t\t inventoryHandler={this.inventoryUpdate}\r\n\t\t\t\t\t\t\t itemEquipHandler={this.equipUpdate}\r\n\t\t\t\t\t\t\t spellbookUpdate={this.spellUpdate}\r\n\t\t\t\t\t\t\t hitPointsUpdate={this.hitPointsHandler}\r\n\t\t\t\t\t\t\t hitPointsMaxHandler={this.hitPointsMaxHandler}\r\n\t\t\t\t\t\t\t enemyNumberUpdate={this.enemyNumber}\r\n\t\t\t\t\t\t\t inventoryRemove={this.inventoryRemove}\r\n\t\t\t\t\t\t\t lock={this.actionLock}\r\n\t\t\t\t\t\t\t spellPickerHandler={this.spellPicker}\r\n\t\t\t\t\t\t\t itemPickerHandler={this.itemPicker}\r\n\t\t\t\t\t\t\t requireInput={this.requireInput}\r\n\t\t\t\t\t\t\t gameover={this.gameover} />\r\n\t\t\t\t</div>\r\n\t\t};\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tif (this.props.value !== \"combat\") {\r\n\t\t\tif (this.state.hitPoints <= 0 || this.state.gameover === true) {\r\n\t\t\t\treturn <div id=\"game\">\r\n\t\t\t\t\t<Gameover />\r\n\t\t\t\t</div>\r\n\t\t\t} else {\r\n\t\t\t\treturn <div id=\"game\">\r\n\t\t\t\t\t<Text {...this.state}\r\n\t\t\t\t\t\t  {...this.props}\r\n\t\t\t\t\t\t  statsHandler={this.statisticHandler}\r\n\t\t\t\t\t\t  allocateHandler={this.allocateHandler}\r\n\t\t\t\t\t\t  inventoryHandler={this.inventoryUpdate}\r\n\t\t\t\t\t\t  itemEquipHandler={this.equipUpdate}\r\n\t\t\t\t\t\t  itemUnequipHandler={this.unequipUpdate}\r\n\t\t\t\t\t\t  spellbookUpdate={this.spellUpdate}\r\n\t\t\t\t\t\t  inventoryRemove={this.inventoryRemove}\r\n\t\t\t\t\t\t  gameover={this.gameover}\r\n\t\t\t\t\t\t  healingUpdate={this.healingHandler} />\r\n\t\t\t\t\t{this.actionRender()}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.state.gameover === true) {\r\n\t\t\t\treturn <div id=\"game\">\r\n\t\t\t\t\t<Gameover />\r\n\t\t\t\t</div>\r\n\t\t\t} else {\r\n\t\t\t\treturn <div id=\"game\">\r\n\t\t\t\t\t<Combat {...this.state}\r\n\t\t\t\t\t\t    {...this.props}\r\n\t\t\t\t\t\t    statsHandler={this.statisticHandler}\r\n\t\t\t\t\t\t    allocateHandler={this.allocateHandler}\r\n\t\t\t\t\t\t    inventoryHandler={this.inventoryUpdate}\r\n\t\t\t\t\t\t    itemEquipHandler={this.equipUpdate}\r\n\t\t\t\t\t\t    spellbookUpdate={this.spellUpdate}\r\n\t\t\t\t\t\t    hitPointsUpdate={this.hitPointsHandler}\r\n\t\t\t\t\t\t\tenemyHitPointsUpdate={this.enemyHitPointHandler}\r\n\t\t\t\t\t\t\tweaponSwapHandler={this.combatWeaponSwapHandler}\r\n\t\t\t\t\t\t\tcombatSpellHandler={this.combatSpellHandler}\r\n\t\t\t\t\t\t\tcombatItemHandler={this.combatItemHandler}\r\n\t\t\t\t\t\t\tinventoryRemove={this.inventoryRemove}\r\n\t\t\t\t\t\t\tarmourBonusUpdate={this.armourBonusHandler}\r\n\t\t\t\t\t\t\tgameover={this.gameover}\r\n\t\t\t\t\t\t\thealingUpdate={this.healingHandler}\r\n\t\t\t\t\t\t\tcombatLock={this.combatLock} />\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Game;","import React from 'react';\r\nimport Start from './start.js';\r\nimport Game from './game.js';\r\nimport SpellList from './spellList.js';\r\n\r\nclass Main extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tgameActive: false,\r\n\t\t\tvalue: \"\",\r\n\t\t\tactionNum: 0,\r\n\t\t\tchambers: [],\r\n\t\t\tspellCooldown: {\r\n\t\t\t\t\"heal\": 0,\r\n\t\t\t\t\"rejuvenate\": 0,\r\n\t\t\t\t\"lightning bolt\": 0,\r\n\t\t\t\t\"fireball\": 0,\r\n\t\t\t\t\"blade storm\": 0\r\n\t\t\t},\r\n\t\t\tspellDuration: {\r\n\t\t\t\t\"shield\": 0\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\t\r\n\tactionHandler = (value, actionNum) => { //Sets the value and number of actions for each scene.\r\n\t\tthis.setState ({\r\n\t\t\tvalue: value,\r\n\t\t\tactionNum: actionNum,\r\n\t\t});\r\n\t};\r\n\t\r\n\tgameStart = () => { //Starts the game and sets starting values.\r\n\t\tthis.actionHandler(0);\r\n\t\tthis.chamberSelect();\r\n\t\tthis.setState({gameActive: true, actionNum: 3});\r\n\t};\r\n\t\r\n\tkey = (e) => {if (e.keyCode === 32) { //Checks if the space bar was pressed for accessibility.\r\n\t\tthis.gameStart();\r\n\t}};\r\n\t\r\n\tchamberSelect = () => { //Selects and randomly orders values to act as randomly generated chambers to enter. \r\n\t\tconst allChambers = [8, 9, 10, 11, 12]; //Array of all potential randomly generated chambers.\r\n\t\tconst shuffledChambers = allChambers.sort(function (a,b) {\r\n\t\t\treturn 0.5 - Math.random()\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\tchambers: shuffledChambers.splice(0, 6)\r\n\t\t});\r\n\t};\r\n\t\r\n\tchamberUpdate = (c) => { //Updates the chambers state and removes visited chamber.\r\n\t\tlet newChambers = this.state.chambers.slice().filter(num => num !== c);\r\n\t\tthis.setState({\r\n\t\t\tchambers: newChambers\r\n\t\t});\r\n\t};\r\n\t\r\n\tspellCooldownHandler = () => { //Updates the cooldown of spells.\r\n\t\tlet state = JSON.parse(JSON.stringify(this.state.spellCooldown));\r\n\t\tfor (let spell in state) {\r\n\t\t\tif (state[spell] > 0) {\r\n\t\t\t\tstate[spell] = state[spell] - 1;\r\n\t\t\t};\r\n\t\t};\r\n\t\tlet spellCooldown = state;\r\n\t\tthis.setState({\r\n\t\t\tspellCooldown\r\n\t\t});\r\n\t};\r\n\t\r\n\tspellCooldownSet = (spell) => { //Sets the cooldown of spells.\r\n\t\tlet activeSpell = SpellList.find((element) => element.id === spell);\r\n\t\tlet state = JSON.parse(JSON.stringify(this.state.spellCooldown));\r\n\t\tstate[activeSpell.name.toLowerCase()] = activeSpell.cooldown;\r\n\t\tlet spellCooldown = state;\r\n\t\tthis.setState({\r\n\t\t\tspellCooldown\r\n\t\t});\r\n\t};\r\n\t\r\n\tspellDurationHandler = () => { //Updates the duration of spells.\r\n\t\tlet state = JSON.parse(JSON.stringify(this.state.spellDuration));\r\n\t\tfor (let spell in state) {\r\n\t\t\tif (state[spell] > 0) {\r\n\t\t\t\tstate[spell] = state[spell] - 1;\r\n\t\t\t};\r\n\t\t};\r\n\t\tlet spellDuration = state;\r\n\t\tthis.setState({\r\n\t\t\tspellDuration\r\n\t\t});\r\n\t};\r\n\t\r\n\tspellDurationSet = (spell) => { //Sets the duration of spells.\r\n\t\tlet activeSpell = SpellList.find((element) => element.id === spell);\r\n\t\tlet state = JSON.parse(JSON.stringify(this.state.spellDuration));\r\n\t\tstate[activeSpell.name.toLowerCase()] = activeSpell.duration;\r\n\t\tlet spellDuration = state;\r\n\t\tthis.setState({\r\n\t\t\tspellDuration\r\n\t\t});\r\n\t};\r\n\t\r\n\tspellDurationClear = (spell) => { //Clears the duration of specified active spells. For use at the end of combat (or if I decide to put in some kind of magic dispelling effect. Devilish!)\r\n\t\tlet activeSpell = SpellList.find((element) => element.id === spell);\r\n\t\tlet state = JSON.parse(JSON.stringify(this.state.spellDuration));\r\n\t\tstate[activeSpell.name.toLowerCase()] = 0;\r\n\t\tlet spellDuration = state;\r\n\t\tthis.setState({\r\n\t\t\tspellDuration\r\n\t\t});\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tif (this.state.gameActive) {\r\n\t\t\treturn <div><Game {...this.state}\r\n\t\t\t\t\t\t\t  mainHandler={this.actionHandler}\r\n\t\t\t\t\t\t\t  chamberHandler={this.chamberUpdate}\r\n\t\t\t\t\t\t\t  spellCooldownUpdate={this.spellCooldownHandler}\r\n\t\t\t\t\t\t\t  spellCooldownSet={this.spellCooldownSet}\r\n\t\t\t\t\t\t\t  spellDurationUpdate={this.spellDurationHandler}\r\n\t\t\t\t\t\t\t  spellDurationSet={this.spellDurationSet}\r\n\t\t\t\t\t\t\t  spellDurationClear={this.spellDurationClear} /></div>\r\n\t\t} else {\r\n\t\t\treturn <div onClick={this.gameStart} onKeyDown={this.key} tabIndex=\"0\"><Start /></div>\r\n\t\t};\r\n\t};\r\n}\r\n\r\nexport default Main;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './stylesheet.css';\nimport Main from './Components/main'\n\n//Snapshots are taken here for simplicity's sake. These could be converted into state of Main (though this is simpler - and if it ain't broke, don't fix it).\nwindow.$motive = \"\"; //Character motivation - set at case 0.\nwindow.$inventoryValueSnapshot = \"\"; //Snapshot of value when opening inventory - set at text.js.\nwindow.$inventoryActionSnapshot = \"\"; //Snapshot of actionNum when opening inventory - set at text.js.\nwindow.$combatValueSnapshot = \"\"; //Snapshot of value when entering combat - set at action.js at each combat encounter. NOTE: value set is + .1 to move onto loot post-combat.\nwindow.$spellPickerValueSnapshot = \"\"; //Snapshot of value when all spells are unlocked. Used to return to previous scene when allSpellsUnlocked is true - set at spellPicker() and action case 8;\nwindow.$spellPickerActionSnapshot = \"\"; //Snapshot of actionNum when spellPicker function is run - set at spellPicker() and action case 8;\n\nReactDOM.render(<Main />, document.getElementById('root'));"],"sourceRoot":""}